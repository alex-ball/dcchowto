% \iffalse meta-comment
%<*internal>
\iffalse
%</internal>
%<*readme>
# dcchowto: A LaTeX class for DCC How-to Guides

This class is useful for typesetting DCC How-to Guides. It comes with some
support files to make it possible to generate camera-ready copy from Markdown
source. The Markdown could then be used to generate an HTML version as well.

## Installation

### Automated way

A makefile is provided which you can use with the Make utility:

  * Running `make` generates the derived files README, dcchowto.pdf and dcchowto.cls.
  * Running `make inst` installs the files in the user's TeX tree.
  * Running `make install` installs the files in the local TeX tree.

## Licence

This work consists of the file dcchowto.dtx and a Makefile.

This work may be distributed and/or modified under the conditions of the
[LaTeX Project Public License (LPPL)](http://www.latex-project.org/lppl.txt),
either version 1.3c of this license or (at your option) any later version.

This work is "maintained" (as per LPPL maintenance status) by
[Alex Ball](http://alexball.me.uk/).

Please note that the generated file dcchowto-apa.csl is based on the apa.csl
file written by Simon Kornblith, with contributions from Bruce D'Arcus,
Curtis M. Humphrey, Richard Karnesky and Sebastian Karcher, and in its
standalone form is separately licensed under a
[Creative Commons Attribution-ShareAlike 4.0 International
Licence](http://creativecommons.org/licenses/by-sa/4.0/).

%</readme>
%<*csl>
%<<LITERAL
<?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="note" version="1.0" demote-non-dropping-particle="never">
  <!-- This style was edited with the Visual CSL Editor (http://steveridout.com/csl/visualEditor/) -->
  <info>
    <title>American Psychological Association 6th Edition</title>
    <id>http://www.zotero.org/styles/apa</id>
    <link href="http://www.zotero.org/styles/apa" rel="self"/>
    <link href="http://owl.english.purdue.edu/owl/resource/560/01/" rel="documentation"/>
    <author>
      <name>Simon Kornblith</name>
      <email>simon@simonster.com</email>
    </author>
    <contributor>
      <name>Bruce D'Arcus</name>
    </contributor>
    <contributor>
      <name>Curtis M. Humphrey</name>
    </contributor>
    <contributor>
      <name>Richard Karnesky</name>
      <email>karnesky+zotero@gmail.com</email>
      <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri>
    </contributor>
    <contributor>
      <name>Sebastian Karcher</name>
    </contributor>
    <contributor>
      <name>Alex Ball</name>
      <email>a.ball@ukoln.ac.uk</email>
    </contributor>
    <category citation-format="author-date"/>
    <category field="psychology"/>
    <category field="generic-base"/>
    <updated>2013-02-26T04:33:40+00:00</updated>
    <rights license="http://creativecommons.org/licenses/by-sa/4.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International Licence</rights>
  </info>
  <locale xml:lang="en">
    <terms>
      <term name="editortranslator" form="short">
        <single>ed. &amp; trans.</single>
        <multiple>eds. &amp; trans.</multiple>
      </term>
      <term name="translator" form="short">
        <single>trans.</single>
        <multiple>trans.</multiple>
      </term>
    </terms>
  </locale>
  <macro name="container-contributors">
    <choose>
      <if type="chapter paper-conference" match="any">
        <names variable="editor translator" delimiter=", " suffix=", ">
          <name and="symbol" initialize-with=". " delimiter=", "/>
          <label form="short" prefix=" (" text-case="title" suffix=")"/>
        </names>
      </if>
    </choose>
  </macro>
  <macro name="secondary-contributors">
    <choose>
      <if type="chapter paper-conference" match="none">
        <names variable="translator editor" delimiter=", " prefix=" (" suffix=")">
          <name and="symbol" initialize-with=". " delimiter=", "/>
          <label form="short" prefix=", " text-case="title" suffix=""/>
        </names>
      </if>
    </choose>
  </macro>
  <macro name="author">
    <names variable="author">
      <name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/>
      <label form="short" prefix=" (" suffix=")" text-case="capitalize-first"/>
      <substitute>
        <names variable="editor"/>
        <names variable="translator"/>
        <choose>
          <if type="report">
            <text variable="publisher"/>
            <text macro="title"/>
          </if>
          <else>
            <text macro="title"/>
          </else>
        </choose>
      </substitute>
    </names>
  </macro>
  <macro name="author-short">
    <names variable="author">
      <name form="short" and="symbol" delimiter=", " initialize-with=". "/>
      <substitute>
        <names variable="editor"/>
        <names variable="translator"/>
        <choose>
          <if type="report">
            <text variable="publisher"/>
            <text variable="title" form="short" font-style="italic"/>
          </if>
          <else-if type="bill book graphic legal_case legislation motion_picture song" match="any">
            <text variable="title" form="short" font-style="italic"/>
          </else-if>
          <else>
            <text variable="title" form="short" quotes="true"/>
          </else>
        </choose>
      </substitute>
    </names>
  </macro>
  <macro name="access">
    <choose>
      <if type="thesis">
        <choose>
          <if variable="archive" match="any">
            <group>
              <text term="retrieved" text-case="capitalize-first" suffix=" "/>
              <text term="from" suffix=" "/>
              <text variable="archive" suffix="."/>
              <text variable="archive_location" prefix=" (" suffix=")"/>
            </group>
          </if>
          <else>
            <group>
              <text term="retrieved" text-case="capitalize-first" suffix=" "/>
              <text term="from" suffix=" "/>
              <text variable="URL"/>
            </group>
          </else>
        </choose>
      </if>
      <else>
        <choose>
          <if variable="DOI">
            <text variable="DOI" prefix="doi:"/>
          </if>
          <else>
            <choose>
              <if type="webpage">
                <group delimiter=" ">
                  <text term="retrieved" text-case="capitalize-first" suffix=" "/>
                  <group>
                    <date variable="accessed" form="text" suffix=", "/>
                  </group>
                  <text term="from"/>
                  <text variable="URL"/>
                </group>
              </if>
              <else>
                <group>
                  <text term="retrieved" text-case="capitalize-first" suffix=" "/>
                  <text term="from" suffix=" "/>
                  <text variable="URL"/>
                </group>
              </else>
            </choose>
          </else>
        </choose>
      </else>
    </choose>
  </macro>
  <macro name="title">
    <choose>
      <if type="report thesis" match="any">
        <text variable="title" font-style="italic"/>
        <group prefix=" (" suffix=")" delimiter=" ">
          <text variable="genre"/>
          <text variable="number" prefix="No. "/>
        </group>
      </if>
      <else-if type="book graphic  motion_picture report song manuscript speech" match="any">
        <text variable="title" font-style="italic"/>
      </else-if>
      <else>
        <text variable="title"/>
      </else>
    </choose>
  </macro>
  <macro name="publisher">
    <choose>
      <if type="report" match="any">
        <group delimiter=": ">
          <text variable="publisher-place"/>
          <text variable="publisher"/>
        </group>
      </if>
      <else-if type="thesis" match="any">
        <group delimiter=", ">
          <text variable="publisher"/>
          <text variable="publisher-place"/>
        </group>
      </else-if>
      <else>
        <group delimiter=", ">
          <choose>
            <if variable="event" match="none">
              <text variable="genre"/>
            </if>
          </choose>
          <choose>
            <if type="article-journal article-magazine" match="none">
              <group delimiter=": ">
                <text variable="publisher-place"/>
                <text variable="publisher"/>
              </group>
            </if>
          </choose>
        </group>
      </else>
    </choose>
  </macro>
  <macro name="event">
    <choose>
      <if variable="event">
        <choose>
          <if variable="genre" match="none">
            <text term="presented at" text-case="capitalize-first" suffix=" "/>
            <text variable="event"/>
          </if>
          <else>
            <group delimiter=" ">
              <text variable="genre" text-case="capitalize-first"/>
              <text term="presented at"/>
              <text variable="event"/>
            </group>
          </else>
        </choose>
      </if>
    </choose>
  </macro>
  <macro name="issued">
    <choose>
      <if type="bill legal_case legislation" match="none">
        <choose>
          <if variable="issued">
            <group prefix=" (" suffix=")">
              <date variable="issued">
                <date-part name="year"/>
              </date>
              <text variable="year-suffix"/>
              <choose>
                <if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="none">
                  <date variable="issued">
                    <date-part prefix=", " name="month"/>
                    <date-part prefix=" " name="day"/>
                  </date>
                </if>
              </choose>
            </group>
          </if>
          <else>
            <group prefix=" (" suffix=")">
              <text term="no date" form="short"/>
              <text variable="year-suffix" prefix="-"/>
            </group>
          </else>
        </choose>
      </if>
    </choose>
  </macro>
  <macro name="issued-sort">
    <choose>
      <if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="none">
        <date variable="issued">
          <date-part name="year"/>
          <date-part name="month"/>
          <date-part name="day"/>
        </date>
      </if>
      <else>
        <date variable="issued">
          <date-part name="year"/>
        </date>
      </else>
    </choose>
  </macro>
  <macro name="issued-year">
    <choose>
      <if variable="issued">
        <date variable="issued">
          <date-part name="year"/>
        </date>
        <text variable="year-suffix"/>
      </if>
      <else>
        <text term="no date" form="short"/>
        <text variable="year-suffix" prefix="-"/>
      </else>
    </choose>
  </macro>
  <macro name="edition">
    <choose>
      <if is-numeric="edition">
        <group delimiter=" ">
          <number variable="edition" form="ordinal"/>
          <text term="edition" form="short"/>
        </group>
      </if>
      <else>
        <text variable="edition" suffix="."/>
      </else>
    </choose>
  </macro>
  <macro name="locators">
    <choose>
      <if type="article-journal article-magazine" match="any">
        <group prefix=", " delimiter=", ">
          <group>
            <text variable="volume" font-style="italic"/>
            <text variable="issue" prefix="(" suffix=")"/>
          </group>
          <text variable="page"/>
        </group>
      </if>
      <else-if type="article-newspaper">
        <group delimiter=" " prefix=", ">
          <label variable="page" form="short"/>
          <text variable="page"/>
        </group>
      </else-if>
      <else-if type="book graphic motion_picture report song chapter paper-conference" match="any">
        <group prefix=" (" suffix=")" delimiter=", ">
          <text macro="edition"/>
          <group>
            <text term="volume" form="short" plural="true" text-case="capitalize-first" suffix=" "/>
            <number variable="number-of-volumes" form="numeric" prefix="1-"/>
          </group>
          <group>
            <text term="volume" form="short" text-case="capitalize-first" suffix=" "/>
            <number variable="volume" form="numeric"/>
          </group>
          <group>
            <label variable="page" form="short" suffix=" "/>
            <text variable="page"/>
          </group>
        </group>
      </else-if>
      <else-if type="legal_case">
        <group prefix=" (" suffix=")" delimiter=" ">
          <text variable="authority"/>
          <date variable="issued" form="text"/>
        </group>
      </else-if>
      <else-if type="bill legislation" match="any">
        <date variable="issued" prefix=" (" suffix=")">
          <date-part name="year"/>
        </date>
      </else-if>
    </choose>
  </macro>
  <macro name="citation-locator">
    <group>
      <choose>
        <if locator="chapter">
          <label variable="locator" form="long" text-case="capitalize-first"/>
        </if>
        <else>
          <label variable="locator" form="short"/>
        </else>
      </choose>
      <text variable="locator" prefix=" "/>
    </group>
  </macro>
  <macro name="container">
    <group>
      <choose>
        <if type="chapter paper-conference entry-encyclopedia" match="any">
          <text term="in" text-case="capitalize-first" suffix=" "/>
        </if>
      </choose>
      <text macro="container-contributors"/>
      <text macro="secondary-contributors"/>
      <text macro="container-title"/>
    </group>
  </macro>
  <macro name="container-title">
    <choose>
      <if type="bill legal_case legislation" match="none">
        <text variable="container-title" font-style="italic"/>
      </if>
      <else>
        <group delimiter=" " prefix=", ">
          <choose>
            <if variable="container-title">
              <text variable="volume"/>
              <text variable="container-title"/>
              <group delimiter=" ">
                <!--change to label variable="section" as that becomes available -->
                <text term="section" form="symbol"/>
                <text variable="section"/>
              </group>
              <text variable="page"/>
            </if>
            <else>
              <choose>
                <if type="legal_case">
                  <text variable="number" prefix="No. "/>
                </if>
                <else>
                  <text variable="number" prefix="Pub. L. No. "/>
                  <group delimiter=" ">
                    <!--change to label variable="section" as that becomes available -->
                    <text term="section" form="symbol"/>
                    <text variable="section"/>
                  </group>
                </else>
              </choose>
            </else>
          </choose>
        </group>
      </else>
    </choose>
  </macro>
  <citation et-al-min="8" et-al-use-first="6" et-al-use-last="true" entry-spacing="0">
    <sort>
      <key macro="author"/>
      <key macro="issued-sort"/>
    </sort>
    <layout>
      <group suffix=".">
        <group delimiter=". ">
          <text macro="author"/>
          <text macro="issued"/>
          <text macro="title" prefix=" "/>
          <text macro="container"/>
        </group>
        <text macro="locators"/>
        <group delimiter=", " prefix=". ">
          <text macro="event"/>
          <text macro="publisher"/>
        </group>
      </group>
      <text macro="access" prefix=" "/>
    </layout>
  </citation>
</style>
%LITERAL
%</csl>
%<*example>
%<<LITERAL
---
title: How to Cite Datasets and Link to Publications
author:
- 'Alex Ball (DCC)'
- 'Monica Duke (DCC)'
date: \today
...

> This guide will help you create links between your academic publications
> and the underlying datasets, so that anyone viewing the publication will
> be able to locate the dataset and vice versa. It provides a working 
> knowledge of the issues and challenges involved, and of how current
> approaches seek to address them. This guide should interest researchers
> and principal investigators working on data-led research, as well as the
> data repositories with which they work.

Why cite datasets and link them to publications? {#sec:why}
================================================

The motivation to cite datasets^[The term ‘dataset’ is used throughout this
guide to mean a logically complete set of data; some systems or services prefer
the terms ‘data product’ or ‘data package’.] arises from a recognition that
data generated in the course of research are just as valuable to the ongoing
academic discourse as papers and monographs. Scientific journals have
traditionally supported research by disseminating knowledge in such
detail that first, peer scientists could judge the strength of the
conclusions based on the quality of the premises and research methods
employed, and second, further investigations could be based upon it. In
many disciplines, though, the paper alone is no longer sufficient for
these purposes: the underlying data also need to be shared.
[@stodden2009err][@rin.nesta2010oac][@lynch2009jgf]

As a medium, the journal paper owes its success in part to the control
systems put in place around it: mechanisms allowing authors to be open
about their research while still receiving due credit; metrics used to
translate such attributions into rewards for authors and their
institutions; and archives ensuring that the work is permanently
available for reference and reuse [@mackenzieowen2007sai ch. 2]. If
datasets are to be regarded as first-class records of research, as they
need to be, a similar set of control systems needs to be constructed
around them.

A major part of this work can be achieved using a robust citation
mechanism for referencing datasets from within traditional publications.
Provided the citation contains the name of a responsible agent, it can
be used to assign due credit. By providing a globally unique identifier,
it can be used to track the impact of a particular dataset. A citation
is also an ideal place to provide the information needed to locate and
access the dataset. In this way, datasets can take advantage of the
infrastructure already in place to manage journal papers.

The rise of electronic journals has led to new and valuable services
being layered over the top of papers, among them the provision of
forward links to papers citing the current one. Such links help the
reader to gauge the impact of the paper, place it within the literature
and in some cases gain awareness of flaws or issues discovered by
others. Forward links from datasets to the papers that cite them provide
all the same benefits, as well as ensuring that documentation for the
dataset can be found.

Ultimately, bibliographic links between datasets and papers are a
necessary step if the culture of the scientific and research community
as a whole is to shift towards data sharing, increasing the rapidity and
transparency with which science advances.

Requirements for data citations {#sec:requirements}
===============================

The SageCite Project has identified a set of requirements for dataset
citations and any services set up to support them.[@duke2011rdc]

\bgroup\boxout

  * The citation itself must be able to identify uniquely the object cited,
    though different citations might use different methods or schemes to do
    so.

  * It must be able to identify subsets of the data as well as the whole
    dataset.

  * It must provide the reader with enough information to access the
    dataset; indeed, when expressed digitally it should provide a mechanism
    for accessing the dataset through the Web infrastructure.

  * It must be usable not only by humans but also by software tools, so that
    additional services may be built using these citations. In particular,
    there need to be services that use the citations in metrics to support
    the academic reward system, and services that can generate complete
    citations.

\endboxout\egroup

Elements of a data citation {#sec:elements}
===========================

The elements that would make up a complete citation are a matter of some
debate. The following list is a superset taken from four different
papers on the subject.
[@altman.king2007pss][@lawrence.etal2008dp][@green2010wnp][@starr.gastl2011ims]

Author

  : The creator of the dataset.\footref{fn:altman.king}\footref{fn:lawrence.etal}\footref{fn:green}\footref{fn:starr.gastl}

Publication date

  : Whichever is the later of: the date the dataset was made available,\footref{fn:altman.king} the
    date all quality assurance procedures were completed,\footref{fn:lawrence.etal}\footref{fn:green} and the date the
    embargo period (if applicable) expired.\footref{fn:starr.gastl}

Title

  : As well as the name of the cited resource itself,\footref{fn:altman.king}\footref{fn:starr.gastl} this may also include
    the name of a facility\footref{fn:lawrence.etal} and the titles of the top collection and main
    parent sub-collection (if any) of which the dataset is a part.\footref{fn:green}

Edition

  : The level or stage of processing of the data, indicating how raw or
    refined the dataset is.\footref{fn:lawrence.etal}

Version

  : A number increased when the data changes, as the result of adding more
    data points or re-running a derivation process, for example.\footref{fn:starr.gastl}

Feature name and URI

  : The name of an ISO 19101:2002 [@iso19101gir] ‘feature’ (e.g. GridSeries,
    ProfileSeries) and the URI identifying its standard definition, used to
    pick out a subset of the data.\footref{fn:lawrence.etal}

Resource type

  : Examples: ‘database’,\footref{fn:green} ‘dataset’.\footref{fn:starr.gastl}

Publisher

  : The organisation either hosting the data\footref{fn:starr.gastl} or performing quality
    assurance.\footref{fn:lawrence.etal}

Unique numeric fingerprint (UNF)

  : A cryptographic hash of the data, used to ensure no changes have
    occurred since the citation.\footref{fn:altman.king}

Identifier

  : An identifier for the data, according to a persistent
    scheme.\footref{fn:altman.king}\footref{fn:lawrence.etal}\footref{fn:green}\footref{fn:starr.gastl}

Location

  : A persistent URL from which the dataset is available. Some identifier
    schemes provide these via an identifier resolver
    service.\footref{fn:altman.king}\footref{fn:lawrence.etal}\footref{fn:green}\footref{fn:starr.gastl}

The most important of these elements – the ones that should be present
in any citation – are the author, the title and date, and the location.
These give due credit, allow the reader to judge the relevance of the
data, and permit access the data, respectively. In theory, they should
between them uniquely identify the dataset; in practice, a formal
identifier is often needed. The most efficient solution is to give a
location that consists of a resolver service and an identifier (for an
example, see [Figure 3](#fig:doi) below).

Note that the way in which these elements would be styled and combined
together in the finished citation depends on the style in use for
citations of textual publications. [Figure 1](#fig:common) provides example data citations drawn
from commonly used style manuals,[@apa2010pma, p. 211][@ucp2010cms, p. 764][@gibaldi2008msm, pp. 213-214, 238-239][@ritter2002oms, p. 551]
while [Figure 2](#fig:repo-cites) shows the citation formats suggested
by three data repositories.

\bgroup\figure[ht]\fillboxout\small

APA

  : Cool, H. E. M., & Bell, M. (2011). *Excavations at St Peter's Church,
    Barton-upon-Humber* \[Data set\].
    [doi:10.5284/1000389](http://dx.doi.org/10.5284/1000389)

Chicago

  : *(Footnote)* H. E. M. Cool and Mark Bell, Excavations at St Peter's Church,
    Barton-upon-Humber (accessed May 1, 2011),
    [doi:10.5284/1000389](http://dx.doi.org/10.5284/1000389).

    *(Bibliography)* Cool, H. E. M., and Mark Bell. Excavations at St Peter's Church,
    Barton-upon-Humber (accessed May 1, 2011).
    [doi:10.5284/1000389](http://dx.doi.org/10.5284/1000389).

MLA

  : Cool, H. E. M., and Mark Bell. "Excavations at St Peter's Church,
    Barton-upon-Humber." Archaeology Data Service, 2001. Web. 1 May 2011.
    `<`<http://dx.doi.org/10.5284/1000389>`>`.

Oxford

  : Cool, H. E. M. & Bell, M. (2011) *Excavations at St Peter's Church,
    Barton-upon-Humber* \[data-set\]. York: Archaeology Data Service \[distributor\]
    `<`DOI [10.5284/1000389](http://dx.doi.org/10.5284/1000389)`>`.

\endfillboxout

\caption[Data citations in common styles]{Data citations in common styles}
\label{fig:common}

\endfigure\egroup

\bgroup\figure[ht]\fillboxout\small

PANGAEA

  : Willmes, S et al. (2009): Onset dates of annual snowmelt on Antarctic
    sea ice in 2007/2008.
    [doi:10.1594/PANGAEA.701380](http://dx.doi.org/10.1594/PANGAEA.701380)

Dryad

  : Kingsolver JG, Hoekstra HE, Hoekstra JM, Berrigan D, Vignieri SN,
    Hill CE, Hoang A, Gibert P, Beerli P (2001) Data from: The strength of
    phenotypic selection in natural populations. Dryad Digital Repository.
    [doi:10.5061/dryad.166](http://dx.doi.org/10.5061/dryad.166)

Dataverse

  : Frederico Girosi; Gary King, 2006, 'Cause of Death Data',
    <http://hdl.handle.net/1902.1/UOVMCPSWOL>
    `UNF:3:9JU+SmVyHgwRhAKclQ85Cg==`
    IQSS Dataverse Network \[Distributor\] V3 \[Version\].

\endfillboxout

\caption{Data citation formats suggested by repositories}
\label{fig:repo-cites}

\endfigure\egroup

Digital Object Identifiers {#sec:dois}
--------------------------

There are several types of persistent identifier that could be used to
identify datasets: examples include Handles, Archival Resource Keys
(ARKs) and Persistent URLs (PURLs), all of which can be resolved to an
Internet location. Arguably the scheme that is gaining most traction is
the Digital Object Identifier (DOI).

The DOI System is an identifier scheme administered by the International
DOI Foundation.^[DOI System Website, URL: <http://www.doi.org/>.]
It is built on the Handle System but has its own
conventions and an independent business model. The identifiers
themselves have the standard Handle structure of prefix, slash, suffix
(see [Figure 3](#fig:doi)). All DOI prefixes begin with ‘`10.`’ to mark them as such; the
prefix may be further subdivided with dots, but otherwise the characters
in a DOI have no special significance.

\bgroup\figure[ht]\fillboxout\small
\input{fig-doi}

\endfillboxout
\caption{Anatomy of a DOI}
\label{fig:doi}

\endfigure\egroup

While there are several services available that can resolve a DOI to an
Internet location,^[Some publishers provide resolvers for their own DOIs, while
the Handle resolver <http://hdl.handle.net/> can be used for any DOI.] the
preferred one is <http://dx.doi.org/>. Appending a DOI to this URL creates a
further URL that can be used to access the associated resource.

The task of managing the DOI registers is delegated to registration
agencies that each specialise in a type of resource. For research
datasets, the registration agency is the DataCite Consortium.^[DataCite
Website, URL: <http://www.datacite.org/>.] The
consortium is made up of libraries and data centres from across the
globe, led by the German National Library of Science and Technology
(TIB). Among the services it provides are human and machine interfaces
for simple end-user administration of DOI registrations. DataCite also
collects metadata about each dataset it registers.^[DataCite Metadata Schema
Repository, URL: <http://schema.datacite.org/>. Version 2.0 of the DataCite
metadata scheme is discussed by Starr and Gastl.\footref{fn:starr.gastl}] These metadata
may be searched through a Web interface^[DataCite Metadata Search service,
URL: <http://search.datacite.org/>.] or harvested using
OAI-PMH.^[DataCite OAI-PMH service, URL: <http://oai.datacite.org/>.]

*Individuals* wishing to register a DOI for their dataset normally do so
via their data repository, rather than directly through DataCite. Any
*repository* wishing to register DOIs needs to obtain a username and
password from DataCite to gain access to the registration service.
Alternatively, the organisation can manage its DOIs through a
third-party service such as EZID.^[EZID Website, URL:
<http://www.cdlib.org/services/uc3/ezid/>.] The username and password are not
needed for the metadata search or OAI-PMH services.

While best practice has yet to emerge on some matters, (see ‘[Current
issues and challenges](#sec:issues)’ below),
certain conventions are already becoming established.

-   Authors should use the URL version of the DOI (i.e. including the
    resolver) wherever possible.

-   When organisations register a DOI for a resource, they should not
    introduce semantic elements into the suffix, especially not metadata
    that might change over time (e.g. publisher, archive, owner).

-   As DOIs are used to cite data as evidence, the dataset to which a
    DOI points should also remain unchanged, with any new version
    receiving a new DOI.

\bgroup\boxout
\noindent{}**Example**

\smallskip
\noindent{}Sage Bionetworks is a non-profit biomedical research organisation
which is creating the Sage Commons,^[Sage Bionetworks Commons Web page, URL:
<http://sagebase.org/commons/>] an infrastructure for
community-based modelling of large multi-contributor datasets.[@derry.etal2011dpm] The
Commons already features a repository of curated datasets;[@furia.sieberts2011sbd] a new
computational platform and repository front-end called Synapse will be
added towards the end of 2011.

In this area of research, methods, tools and workflows are just as
important as data. Taverna workflows, for example, provide a means of
recording and documenting each step of the modelling process so that it
can be shared with the scientific community. Furthermore, the workflows
may be executed by Taverna Workbench, allowing the results from the
pipeline to be reproduced. The SageCite Project worked with Sage
Bionetworks to demonstrate both capturing workflows using Taverna, and
making them citable resources using DataCite DOIs.^[SageCite Project
blog, URL: <http://blogs.ukoln.ac.uk/sagecite/>]

\endboxout\egroup

Current issues and challenges {#sec:issues}
=============================

While the basics of data citation can be derived by analogy with the
citation of textual publications, especially electronic ones, there are
finer points such as issues of granularity, fine-grained and unambiguous
credit and citation placement that merit special attention.

Granularity {#sec:units}
-----------

With print publications, the issue of citing at different levels of
granularity is relatively straightforward. The documents listed within a
bibliography or reference section represent intellectual wholes:
single-author monographs are referenced as whole books, but with journal
issues, conference proceedings and edited collections the relevant
papers are referenced individually. More granular references (to
sections, pages, etc.) are made at the point of citation in the text,
rather than in the bibliography.

Datasets are a little more complicated. A dataset may form part of a
collection and be made up of several files, each containing several
tables, each containing many data points. There are also more abstract
subsets that can be used, such as features and parameters. At the other
end of the scale, it is not always obvious what would constitute an
intellectual whole: it can be argued, for example, that investigations
should be the primary units of citation rather than individual datasets
[@lawrence2011cdo]. For authors, the pragmatic solution is to list
datasets at whatever level of granularity has been chosen by the host
repository for assigning identifiers. If a finer level of granularity is
required, the in-text citation should provide the reader with the
information needed to find the subset. As conventions for doing this
have yet to be established, if the repository provides identifiers at
several levels of granularity, the finest-grained level that meets the
need of the citation should be used in the bibliography, to minimise the
additional information needed.

Microattribution {#sec:microattribution}
----------------

Where a dataset is assembled from very many contributions, crediting
each contributor individually becomes unfeasible using traditional
techniques. Microattribution is a way of crediting contributors in a
more compact fashion, to keep the operation manageable. It can also be
used to credit people or organisations whose contributions don’t fit the
roles of creator or compiler: for example, those who implement or carry
out intermediate data processing steps.

Instead of providing a traditional citation to the data collection paper
associated with each contribution, a table is produced that lists each
contribution and the agent responsible. Where possible, standard
identifiers (for both contributions and contributors) are used to
abbreviate the entries, and the table is included in the paper’s
supplementary data.

This technique is still relatively new: the first paper to use
microattribution to encourage comprehensive sharing of genetic variation
data in a defined system was published in 2011 [@giardine.etal2011sda].
Once the technique is more established, repositories should consider
making microattribution data available in machine-interpretable form,
rather than as supplementary spreadsheets, to aid its use in metrics and
other services.

Contributor identifiers {#sec:ids}
-----------------------

If contributors have a common name, or move between many different
institutions, giving them an unambiguous credit is somewhat problematic.
A possible solution is for each contributor to be given a unique
identifier, to be used in connection with all their publications, data
contributions, and so on. While several identifier schemes are already
well established, most are arguably unsatisfactory because they are
either too narrowly scoped, proprietary or focused on authentication
rather than attribution. There are however two schemes being developed
specifically for attribution.

The Open Researcher and Contributor Identifier (ORCID) is a scheme
specifically aimed at academic authors.^[ORCID Initiative Website,
URL: <http://about.orcid.org/>.] It has gained support from
over 200 organisations, including major academic publishers. The
underlying infrastructure is still being developed as of mid-2011, but
the intention is to maintain a registry of IDs, each associated with a
researcher profile and a list of publications to which that researcher
has contributed. The registry will also allow the profile to be linked
to identifiers and profiles from other schemes such as Thomson Reuters’
ResearcherID,^[ResearcherID Website, URL: <http://www.researcherid.com/>.
] Scopus,^[Scopus Website, URL: <http://www.scopus.com/>.] Scholar
Universe,^[Scholar Universe, URL: <http://www.scholaruniverse.com/>.] and
RePEc.^[RePEc Author Service Website, URL: <http://authors.repec.org/>.]

The International Standard Name Identifier (ISNI) scheme is a draft ISO
standard for registering ‘Public Identities’: people, pseudonyms,
personas and legal entities involved in the creation or distribution of
intellectual property [@iso27729]. It is thus a broader scheme than
ORCID, allowing organisations to be identified as well as individuals.
ISNIs take the form of a 16-digit number (though the last digit may be
‘X’); each identifier is supported by a metadata record containing
details such as name(s), date of birth, fields of endeavour and roles
within them, titles of creations and a URI for further information.

As the primary utility for such identifiers will be to support software
tools, they will probably be better placed in machine-readable metadata
than written out for human inspection. Nevertheless, the ORCID
Initiative envisages ORCID IDs being included in parentheses after
author names in textual citations, as in [Figure 4](#fig:orcid).

\bgroup\figure[ht]\fillboxout\small
\noindent{}Chaturvedi, V. (AAA-1019-2010). (2004). Editorial.
*Mycopathologia, 157,* iii–iv. Retrieved from
<http://dx.doi.org/10.1023/B:MYCO.0000020677.89178.15>

\endfillboxout
\caption{Example citation using an ORCID ID}
\label{fig:orcid}

\endfigure\egroup


Placement of data citations {#sec:place}
---------------------------

Treating datasets as first-class records of research implies placing
citations to them in the bibliography, works cited or references section
of a document. This is required by Pensoft journals, for example, which
also specify that the in-text pointer to the full citation should occur
in a dedicated ‘Data Resources’ section [@penev.etal2011pdp].

There is, however, a special relationship between a dataset and the
paper describing its collection (as opposed to subsequent papers that
cite it); it could be argued that the way to mark this would be to
include the (full) data citation elsewhere in the document
[@piwowar2011lfd]. The data publishing journal *Earth System Science
Data*, for example, usually cites the collected data in a dedicated
‘Data coverage and parameter measured’ section. Alternatively, if the
acknowledgements section is already being mined for funder information,
it may be appropriate to put the data citation there [@rin2008afs].

On the other hand, there is value in citing datasets consistently across
all papers, in terms of simplifying both editorial guidelines and author
training. Bibliographies also tend to be better indexed and more freely
available than the main texts of papers, and would therefore afford the
citation greater visibility.

\bgroup\boxout

Summary for researchers {#sec:summary-researchers}
=======================

* If you have generated/collected data to be used as evidence in an
academic publication, you should deposit them with a suitable data
archive or repository as soon as you are able. If they do not provide
you with a persistent identifier or URL for your data, encourage them to
do so.

* When citing a dataset in a paper, use the citation style required by the
editor/publisher. If no form is suggested for datasets, take a standard
data citation style (e.g. DataCite’s[@starr.gastl2011ims]) and adapt it to match the style
for textual publications.

* Give dataset identifiers in the form of a URL wherever possible, unless
otherwise directed.

* Include data citations alongside those for textual publications. Some
reference management packages now include support for datasets, which
should make this easier.

* Cite datasets at the finest-grained level available that meets your
need. If that is not fine enough, provide details of the subset of data
you are using at the point in the text where you make the citation.

* If a dataset exists in several versions, be sure to cite the exact
version you used.

* When you publish a paper that cites a dataset, notify the repository
that holds the dataset, so it can add a link from that dataset to your
paper.

\endboxout\egroup

The remainder of this guide is aimed at those responsible for the
supporting infrastructure, rather than researchers.

Building a citation infrastructure {#sec:building-infrastructure}
==================================

This section provides an overview of some of the technologies available
to support data citation.

Citation Notification Service {#sec:trackbacks}
-----------------------------

The TrackBack protocol is one of a family of linkback protocols that
allow a blog article to list and link to later articles that mention or
comment on it, allowing the reader to follow a debate across many blogs
[@sixapart2002tts]. It works in the following way. On publication of an
article, the blogging software looks up all the pages to which the
article links, and scans them for embedded TrackBack URLs. Having found
one, the software sends an HTTP POST request (as used by longer Web
forms) to the TrackBack URL. At a minimum, the request contains a link
to the article; it may also contain the article’s title, the title of
the blog, and an excerpt typically showing the link in context. The blog
responsible for the TrackBack URL then sends back a brief XML
acknowledgement to indicate either success or failure in understanding
the request, known as a TrackBack ‘ping’.

The CLADDIER Project defined an extended version of the TrackBack
protocol for use as a Citation Notification Service in digital object
repositories.^[CLADDIER Project page, URL:
<http://www.jisc.ac.uk/whatwedo/programmes/digitalrepositories2005/claddier>.]
The main extensions were, at the sending
end,[@matthews.etal2007rdp][@matthews.etal2009pes]

-   ‘metadata’ and ‘metadataformat’ fields for adding arbitrary metadata
    to the TrackBack ping;

-   a ‘type’ field to allow the same protocol to be used for forward
    citations (‘reverse TrackBacks’) and republications;

-   an ‘action’ field to allow existing TrackBacks to be removed (an
    ‘anti-TrackBack’) or edited;

and at the receiving end

-   additional RDF metadata that could be embedded alongside the
    TrackBack URL, such as bibliographic information about the citable
    resource (to permit reverse TrackBacks) or an alternative URL to
    which to send anti-TrackBack pings;

-   the option to use a whitelist of trusted senders to prevent spam.

As a demonstration, CLADDIER implemented the Citation Notification
System in STFC’s ePub repository and the BADC repository. The follow-on
project StoreLink implemented the system as plugins for EPrints, DSpace
and Fedora repository software.^[StoreLink Project summary Web page, URL:
<http://www.jisc.ac.uk/whatwedo/programmes/digitalrepositories2007/storelink.aspx>.]
StoreLink was itself followed by
the Webtracks Project, which is generalising the system to form the
Inter-Repository Communication (InteRCom) protocol and extending its
usage beyond e-print repositories to STFC’s ICAT data catalogue, open
electronic notebooks and scientific publishers.^[Webtracks Project Web page, URL: 
<http://www.stfc.ac.uk/e-Science/projects/medium-term/metadata/webtracks/22422.aspx>.]

\bgroup\boxout
\noindent{}**Example**

\smallskip\noindent
Knowledge Blog^[Knowledge Blog Website, URL: <http://knowledgeblog.org/>]
is an alternative scholarly publication platform based on WordPress^[WordPress
Website, URL: <http://wordpress.org/>] blogging software. It makes heavy use of linkbacks,
for example as the mechanism for linking an article with its reviews,
and could therefore be used together with the Citation Notification
Service to provide bi-directional links to datasets. Its KCite plugin
allows for the automatic generation of citations from just a DOI (using
the metadata lookup API from the CrossRef registration agency) or a
PubMed identifier,[@lord.etal2011okb] though this has not yet been extended
to work with DataCite DOIs.

\endboxout\egroup

Nanopublications {#sec:nanopublications}
----------------

A nanopublication is, simply put, a statement and a set of annotations
on it, the whole of which is citable in its own right
[@groth.etal2010anp]. The idea is that a scientific publication or
dataset is broken down into individual statements, expressed as RDF
triples: that is, in the form subject–predicate–object, e.g. malaria
is-carried-by mosquitoes. Each of these statements is assigned a URI and
then made the object of further statements (annotations) that say, for
example, who made the statement, the document or dataset from which the
statement was extracted, the date the statement was published. The set
formed by the original statement and these annotations is itself given a
URI and thus becomes a nanopublication.

The reason for doing this is to provide a robust mechanism for
aggregating information and data into a knowledge base from which new
inferences may be drawn. The robustness comes from the annotations,
which provide a resource for assessing the reliability of the statement.
A nanopublication of a statement is said to contribute to the
‘S-Evidence’ for that statement; if, on aggregating a large number of
nanopublications, one ends up with two conflicting statements, one would
compare the S-Evidence for each statement to decide which should be used
for further inference.

In order to make this work, one needs to be able to identify
unambiguously every concept and entity to which the nanopublications
refer. Nanopublications are therefore best suited to disciplines which
are already well supported by RDF-friendly ontologies. For concepts and
entities that do not sit easily within a formal ontology, a more relaxed
approach such as that provided by the Concept Wiki can be used.^[Concept
Wiki Website, URL: <http://www.conceptwiki.org/>.]

Citation Typing Ontology {#sec:cito}
------------------------

The Citation Typing Ontology (CiTO) is a formal language for specifying
why one resource cites another [@shotton2010cct]. It contains several
terms particularly relevant for data citation; additional terms can be
found in the extension ontology CiTO4Data.[@shotton.peroni2011cct]
[@shotton.peroni2011cdc]

-   *Uses data from/provides data for.* These terms describe the
    relationship between a dataset and a paper describing work using
    that dataset.

-   *Cites as data source/is cited as data source by.* These terms imply
    the above relationship but also indicate that the paper formally
    cites the dataset.

-   *Contains assertion from/provides assertion for.* These terms
    describe, for example, the relationship between a full dataset and a
    nanopublication based upon it.

-   *Compiles/is compiled by.* These terms describe, for example, the
    relationship between a dataset and the software used to derive it.

Certain of the other terms may be useful in clarifying how datasets or
nanopublications relate to one another, e.g. *confirms/is confirmed by*,
*corrects/is corrected by*, *disagrees with/is disagreed with by*,
*extends/is extended by*, *updates/is updated by*.

Data citation infrastructures {#sec:infrastructure}
=============================

The following repositories and systems provide examples of data citation
infrastructures in practice, both in terms of human workflows and
software, that could be reused by other repositories. Sample citations
provided by each of them can be found in [Figure 2](#fig:repo-cites) above.

PANGAEA {#sec:pangaea}
-------

PANGAEA (Data Publisher for Earth and Environmental Science) is hosted
by the Alfred Wegener Institute for Polar and Marine Research and the
Center for Marine Environmental Sciences in Germany.^[PANGAEA Website,
URL: <http://www.pangaea.de/>.] It is the data
archive and distribution system for the World Data Centre for Marine
Environmental Sciences (WDC-MARE) and the designated archive for the
data publishing journal *Earth System Science Data*.

Throughout its history, PANGAEA has collaborated extensively with
scientific publishers; it provides links from data holdings to the
traditional publications that reference them, and wherever possible,
those publications reference the holdings in PANGAEA. Initially datasets
were cited using standard URLs, but now DOIs are used as the canonical
identifier for all PANGAEA holdings [@diepenbroek.etal2008piw].

Once the author has uploaded the data and metadata, a curator checks the
completeness of the metadata and consistency of the data, then imports
the data into the archive. Having checked that the data are properly
indexed by the system, the curator performs technical quality control
tests, sets appropriate access conditions and refers the result back to
the author for proofing. Once the author and curator are both satisfied,
the data are published and assigned a DOI. Once this has happened, the
metadata and data are both considered static.

The middleware component of PANGAEA, panFMP, has been released as open
source software.^[PANGAEA Framework for Metadata Portals Website, URL:
<http://www.panfmp.org/>.] Some of the associated visualisation and
conversion tools have been made available as freeware.^[PANGAEA Software
Web page, URL: <http://www.pangaea.de/software/>.]

Dryad {#sec:dryad}
-----

Dryad is a data repository specialising in evolutionary biology and
ecology, developed by the National Evolutionary Synthesis Center and the
University of North Carolina Metadata Research Center.^[Dryad Website, URL:
<http://datadryad.org/>.] It is a
preferred data archive for several journals including *The American
Naturalist*, *Molecular Ecology*, *Molecular Biology and Evolution*,
*Evolutionary Applications*, *Heredity* and *Nature*.

Dryad has now settled on DOIs to identify its datasets. As with PANGAEA,
catalogue records for the data holdings in Dryad contain the citation of
the accompanying publication as well as a sample citation for the data
itself.

After the author has submitted the data and metadata to Dryad, a curator
checks that the files contain the right sort of information before
performing a series of quality control procedures. When these have been
completed, a DOI is assigned to the data and sent to the author, and the
catalogue record goes live in the repository. The record is updated with
the citation of the data collection paper once it is published
[@feinstein2010wha].

Dryad is based on the DSpace digital repository;^[DSpace Website, URL:
<http://www.dspace.org/>.] the Dryad extensions have been released as open
source software.^[Dryad code repository, URL: <http://dryad.googlecode.com/>.]

Dataverse {#sec:dataverse}
---------

The Dataverse Network is a software application for building data
repositories called dataverses.^[Dataverse Network Project Website, URL:
<http://thedata.org/>.] It is developed by a community led
by the Institute for Quantitative Social Science (IQSS) at Harvard
University. As well as the original Dataverse Network at IQSS, there are
also instances at the University of North Carolina and the University of
the Thai Chamber of Commerce. Dataverses within the same Network may be
cross-searched, and Dataverse Networks may also be linked to provide
cross-searching facilities.

Authors may set up their own dataverse or contribute to an existing one.
After filling out a metadata entry form and uploading the data files
associated with a study, the author submits the data for review. The
curator for the dataverse can then modify the metadata before releasing
the study [@king2007idn].

Where data have been uploaded in SPSS, SATA or GraphML formats, a Unique
Numeric Fingerprint is calculated for each data file and the study as a
whole. In the IQSS Dataverse Network, studies are automatically assigned
Handles. The catalogue page can display a citation for the corresponding
data collection paper alongside a sample citation for the data.

Authors are welcome to upload data to the Henry A. Murray Research
Archive at Harvard, or create their own dataverses in the IQSS Dataverse
Network.^[Henry A. Murray Research Archive Website, URL: <http://www.murray.harvard.edu/>.]
Alternatively, institutions can set up their own Dataverse
Network using the open source software.^[Dataverse Network code repository, URL:
<http://sourceforge.net/projects/dvn/>.]

Current implementation issues {#sec:implementation-issues}
=============================

Two current issues for repositories are how to cater for both manual and
automatic uses of citations, and how to deal with dynamic datasets.

Manual and automatic use of citations {#sec:robots}
-------------------------------------

It is good practice for the URL in a data citation to lead to a *landing
page* for the dataset, rather than to initiate a direct download. The
landing page should enable readers to ensure they have located the right
dataset, to (re-)familiarise themselves with the research context and
supporting documentation, to consider licence terms prior to downloading
and to switch to a more recent version (or otherwise-formatted
representation) of the data if required. Landing pages also help to
create a more even user experience between datasets available through
direct access and those available through mediated access.

Since for the most part data are processed by software, it can help to
accelerate progress if software tools are also able to retrieve data by
means of the same URL. Software tools, like human readers, may wish to
be selective with regard to versions and representations, to avoid data
with an unsuitable licence, to download supporting documentation or
data, or to select individual files or other subsets of the data. Such
use cases require that the URL actually returns the machine-readable
equivalent of a landing page. The technique used by the ACRID
Project,^[ACRID Project Website, URL:
<http://www.cru.uea.ac.uk/cru/projects/acrid/>.] for example, is to provide
an index of the data and metadata associated with a workflow in the form of
an OAI-ORE Resource Map [@lagoze.etal2008oug].

Clearly humans and software have different requirements for the dataset
landing page. One way to satisfy both would be to embed the metadata
intended for software tools as RDF within the human-readable Web page.
This can be done using either RDFa as in [Figure 5](#fig:rdfa)
[@adida.birbeck2008rp], or HTML5 microdata as in [Figure 6](#fig:html5)
[@w3c2011hm].

\bgroup\figure[ht]\fillboxout\small
\input{fig-rdfa}

\endfillboxout
\caption{Example of using RDFa to embed a link to a publication within a dataset's Web page}
\label{fig:rdfa}

\endfigure\egroup

\bgroup\figure[ht]\fillboxout\small
\input{fig-html5}

\endfillboxout
\caption{Example of using HTML5 microdata to embed a link to a publication within a dataset's Web page}
\label{fig:html5}

\endfigure\egroup

An alternative method of serving both constituencies would be to use
*content negotiation*. This is where the Web server keeps several
different representations of a resource; when a Web client requests the
resource, the server sends back the representation that best matches the
client’s preferred content type (as expressed by the ‘Accept’ HTTP
header). In this case, the Web server would keep as the dataset landing
page an HTML Web page for human readers and an RDF/XML document (say)
for software tools.

While archives and repositories are broadly consistent in the
information they provide to readers on their landing pages – descriptive
metadata, a sample citation, a link to an accompanying paper, a link to
the data files or instructions on how to access them, licence terms –
they are still experimenting with the information they provide to
software tools.

\bgroup\boxout
\noindent{}**Example**

\smallskip
\noindent{}*Acta Crystallographica Section E* (*Acta Cryst E*) is an online,
open access data journal published by the International Union of
Crystallographers.^[Acta Cryst E Website, URL: <http://journals.iucr.org/e/journalhomepage.html>]
It operates a workflow whereby data are submitted by
authors at the same time as the data collection paper. The data are
checked automatically for validity, and the validation report passed to
reviewers. On publication, the data are made available for download from
the page for the paper.

The XYZ Project has developed additional tools to support workflows like
these.^[XYZ Project blog, URL: <http://projectxyz.wordpress.com/>]
It also explored, with *Acta Cryst E*, the possibility of
embedding data directly within the Web pages of journal papers, using
RDF and microformats in a profile of HTML known as Scholarly HTML [@sefton2011shc].

\endboxout\egroup

Versioning {#sec:versions}
----------

One of the important features of the citation system is that a reader
should be able to identify and retrieve the exact same resource that the
author used when answering the research question. This is critical in
the case of data as even typographical corrections may significantly
change the conclusions drawn from a dataset. There is also the potential
for many more versions from which to choose, since data may be made
available in versions from different stages of processing,^[Whether data
from intermediate stages of processing should be made citable depends on
the value added by processing, the reversibility of the technique and the
utility of such data within the discipline.] as well
as from different points in time. With this in mind, data repositories
should ensure that different versions are independently citable (with
their own identifiers).

The problem comes when repositories have to deal with rapidly changing
datasets, and it is a slightly different problem depending on whether
the dataset is frequently *revised*, that is, data points are
continually improved or updated, or frequently *expanded*, such as
sensor data maintained as a time series. Either way, to keep the
versions manageable there are two possible approaches the data
repository can take: time slices and snapshots.

With the *snapshot* approach, at regular intervals or at the request of
a citing author, a snapshot is taken of the dataset and made citable.
This is the better solution for revised datasets, as after retrieving
the data the reader or author need not perform any additional operations
to arrive at the required data. It is also better for expanding datasets
where authors are concerned with the whole time series.

With the *time slice* approach, the citable entity becomes the set of
updates made to a dataset during a particular time period rather than
the full dataset itself (e.g. the 2008 data from a series running since
1950). This would be inappropriate for revised datasets, as the author
or reader would need to assemble the data from a base file and several
incremental change files. To a lesser extent, it would also be
cumbersome for authors using a large proportion of an expanding dataset,
as they would need to cite multiple time slices to build up the required
range; but if an author is only concerned with data from a short period
of time this approach is more suitable than a full snapshot.

Note that these discussions only concern how datasets are presented to
users as citable resources. It does not affect how a repository might
store the data, so long as it can guarantee that the same identifier
always returns the same data.

\bgroup\boxout

Summary for data repositories {#sec:summary-repositories}
=============================

* Ensure that anyone wishing to cite a dataset you host can use a
persistent identifier that you provide to do so. For this, choose an
identifier scheme which allows the identifier to be resolved to a URL.
This URL should belong to a landing page that contains descriptive
information about the dataset, as well as links or instructions for
accessing it.

* Once an identifier has been assigned to a (version/snapshot of) a
dataset, ensure that it and any explanatory metadata remain static over
time. Ensure that the identifiers remain unique and associated with the
correct versions.

* Assign identifiers to static datasets only when no further changes or
corrections are expected (i.e. after quality control checks are
complete). For dynamic datasets, assign identifiers when new snapshots
or time slices are created, whether this is on a regular basis or on
demand.

* Provide data depositors with a sample citation for their dataset, for
use in academic publications.

* Provide links from dataset landing pages to those published papers of
which you are aware that cite the dataset. This may require
collaboration with authors and publishers.

* For more information about registering DOIs for datasets, contact your
local DataCite member.^[List of DataCite members, URL: <http://datacite.org/members>]
For more information about registering Archival Resource Keys,^[Archival
Resource Keys Website, URL: <https://confluence.ucop.edu/display/Curation/ARK>]
contact the California Digital Library.

\endboxout\egroup

Acknowledgements {#sec:acknowledgements}
================

Thank you to Sarah Callaghan (STFC), Shirley Crompton (STFC), Michael
Diepenbroek (WDC-MARE), Margaret Henty (ANDS), Catherine Jones (STFC),
Sarah Jones (DCC), Florance Kennedy (DCC), Phillip Lord (Newcastle
University) and Tom Pollard (BL) for helpful comments.

Further information {#sec:further-information}
===================

\setlength{\parindent}{0pt}\nonzeroparskip\color{dccblue}\small
Two other DCC guides cover this topic:

-   **Awareness Level:** [*Introduction to Curation: Data Citation and
    Linking*](http://www.dcc.ac.uk/resources/briefing-papers/introduction-curation/data-citation-and-linking)
    \(2011\) by Alex Ball and Monica Duke

-   **Awareness Level:** [*Introduction to Curation: Persistent
    Identifiers*](http://www.dcc.ac.uk/resources/briefing-papers/introduction-curation/persistent-identifiers)
    \(2006\) by Joy Davidson

\normalcolor
The following may also be of interest:

-   \fullcite{ands2011dca}[@ands2011dca]

-   \fullcite{lane2008dce}[@lane2008dce]

-   \fullcite{callaghan.etal2011cap}[@callaghan.etal2011cap]

-   \fullcite{newton.etal2010ddc}[@newton.etal2010ddc]

-   \fullcite{page2009spt}[@page2009spt]

-   \fullcite{icpsr2011whs}[@icpsr2011whs]

-   \fullcite{wilkinson2011syw}[@wilkinson2011syw]

-   \fullcite{wilkinson2011wdw}[@wilkinson2011wdw]

%LITERAL
%</example>
%<*bib>
%<<LITERAL
@ARTICLE{altman.king2007pss,
  author = {Micah Altman and Gary King},
  title = {A Proposed Standard for the Scholarly Citation of Quantitative Data},
  journal = {D-Lib Magazine},
  volume = {13},
  number = {3/4},
  date = {2007},
  issn = {1082-9873},
  doi = {10.1045/march2007-altman},
  timestamp = {2011-05-11}
}

@MANUAL{ansi.nisoZ39.88,
  author = {{ANSI/NISO Z39.88-2004}},
  title = {The {OpenUrl} Framework for Context Sensitive Services},
  date = {2005},
  publisher = {National Information Standards Organization},
  location = {Bethesda, MD},
  isbn = {978-1-880124-61-1},
  timestamp = {2011-05-12},
  url = {http://www.niso.org/standards/z39-88-2004},
  urldate = {2011-05-12}
}

@UNPUBLISHED{axton2010pca,
  author = {Myles Axton},
  title = {Publication Criteria and Contributor Credit},
  date = {2010-01-26},
  howpublished = {Presentation to the Sage Bionetworks Organizing Meeting, Boston,
	MA},
  timestamp = {2011-05-12}
}

@ARTICLE{chaturvedi2004ed,
  author = {Vishnu Chaturvedi},
  title = {Editorial},
  journal = {Mycopathologia},
  volume = {157},
  date = {2004},
  pages = {iii-iv},
  nameaddon = {(AAA-1019-2010)},
  timestamp = {2011-06-02},
  url = {http://dx.doi.org/10.1023/B:MYCO.0000020677.89178.15}
}

@ARTICLE{chavan.ingwersen2009tdp,
  author = {Chavan, Vishwas and Ingwersen, Peter},
  title = {Towards a Data Publishing Framework for Primary Biodiversity Data},
  journal = {BMC Bioinformatics},
  volume = {10},
  number = {Suppl 14},
  date = {2009},
  issn = {1471-2105},
  pages = {S2},
  abstract = {BACKGROUND:Currently primary scientific data, especially that dealing
	with biodiversity, is neither easily discoverable nor accessible.
	Amongst several impediments, one is a lack of professional recognition
	of scientific data publishing efforts. A possible solution is establishment
	of a 'Data Publishing Framework' which would encourage and recognise
	investments and efforts by institutions and individuals towards management,
	and publishing of primary scientific data potentially on a par with
	recognitions received for scholarly publications. DISCUSSION:This
	paper reviews the state-of-the-art of primary biodiversity data publishing,
	and conceptualises a 'Data Publishing Framework' that would help
	incentivise efforts and investments by institutions and individuals
	in facilitating free and open access to biodiversity data. It further
	postulates the institutionalisation of a 'Data Usage Index (DUI)',
	that would attribute due recognition to multiple players in the data
	collection/creation, management and publishing cycle. CONCLUSION:We
	believe that institutionalisation of such a 'Data Publishing Framework'
	that offers socio-cultural, legal, technical, economic and policy
	environment conducive for data publishing will facilitate expedited
	discovery and mobilisation of an exponential increase in quantity
	of 'fit-for-use' primary biodiversity data, much of which is currently
	invisible.},
  doi = {10.1186/1471-2105-10-S14-S2},
  pubmedid = {19900298},
  subtitle = {Challenges and Potentials for the Biodiversity Informatics Community},
  timestamp = {2011-06-08},
  url = {http://www.biomedcentral.com/1471-2105/10/S14/S2}
}

@ONLINE{davidson2006pi,
  author = {Joy Davidson},
  title = {Introduction to Curation},
  date = {2006-10-17},
  organization = {the Digital Curation Centre},
  subtitle = {Persistent Identifiers},
  timestamp = {2011-06-08},
  url = {http://www.dcc.ac.uk/resources/briefing-papers/introduction-curation/persistent-identifiers},
  urldate = {2011-06-08}
}

@ARTICLE{derry.etal2011dpm,
  author = {Jonathan M. J. Derry and Lara M. Mangravite and Christine Suver and
	Matt Furia and David Henderson and Xavier Schildwachter and Jonathan
	Izant and Solveig K. Sieberts and Michael R. Kellen and Stephen H.
	Friend},
  title = {Developing Predictive Molecular Maps of Human Disease through Community-Based
	Modeling},
  journal = {Nature Precedings},
  date = {2011-04-04},
  doi = {10.1038/npre.2011.5883.1},
  timestamp = {2011-07-14}
}

@ARTICLE{diepenbroek.etal2002pis,
  author = {Michael Diepenbroek and Hannes Grobe and Manfred Reinke and Uwe Schindler
	and Reiner Schlitzer and Rainer Sieger and Gerold Wefer},
  title = {{PANGAEA}},
  journal = {Computers and Geosciences},
  volume = {28},
  number = {10},
  date = {2002},
  issn = {0098-3004},
  pages = {1201-1210},
  doi = {10.1016/S0098-3004(02)00039-0},
  keywords = {Data management, Data mining, WDC-MARE, PangaVista, GIS},
  subtitle = {An Information System for Environmental Sciences},
  timestamp = {2011-05-23}
}

@INPROCEEDINGS{diepenbroek.etal2008piw,
  author = {Michael Diepenbroek and Uwe Schindler and Hannes Grobe},
  title = {{PANGAEA}},
  booktitle = {{WEBIST 2008}},
  date = {2008},
  publisher = {{Institute for Systems and Technologies of Information, Control and
	Communication}},
  isbn = {978-989-8111-27-2},
  venue = {Funchal, Madeira, Portugal},
  volume = {2},
  pages = {149-154},
  booksubtitle = {Proceedings of the 4th {International} {Conference} on {Web} {Information}
	{Systems} and {Technologies}},
  eventdate = {2008-05-04/2008-05-07},
  subtitle = {An {ICSU} {World} {Data} {Center} as a Networked Publication and Library
	System for Geoscientific Data},
  timestamp = {2011-05-23},
  url = {http://hdl.handle.net/10013/epic.28613},
  urldate = {2011-05-23}
}

@ONLINE{duke2011rdc,
  author = {Monica Duke},
  title = {Requirements for Data Citation},
  date = {2011-08-22},
  organization = {the SageCite blog},
  entrysubtype = {Blog post},
  subtitle = {The Prequel},
  timestamp = {2011-08-22},
  url = {http://blogs.ukoln.ac.uk/sagecite/2011/08/22/requirements-for-data-citation-the-prequel/},
  urldate = {2011-08-22}
}

@ONLINE{feinstein2010wha,
  author = {Elena Feinstein},
  title = {What Happens After you Submit your Data to {Dryad}?},
  date = {2010-12-02},
  organization = {the Dryad News and Views blog},
  entrysubtype = {Blog post},
  timestamp = {2011-05-24},
  url = {http://blog.datadryad.org/2010/12/02/what-happens-after-you-submit-your-data-to-dryad/},
  urldate = {2011-05-24}
}

@MANUAL{furia.sieberts2011sbd,
  author = {Matt Furia and Solly Sieberts},
  title = {{Sage} {Bionetworks} Data Curation Guidelines},
  date = {2011-03-31},
  publisher = {Sage Bionetworks},
  version = {2.1},
  timestamp = {2011-08-15},
  url = {http://precedings.nature.com/documents/5883/version/1/files/npre20115883-1.pdf},
  urldate = {2011-08-15}
}

@ARTICLE{giardine.etal2011sda,
  author = {Belinda Giardine and Joseph Borg and Douglas R. Higgs and Kenneth
	R. Peterson and Sjaak Philipsen and Donna Maglott and Belinda K.
	Singleton and David J. Anstee and A. Nazli Basak and Barnaby Clark
	and Flavia C. Costa and Paula Faustino and Halyna Fedosyuk and Alex
	E. Felice and Alain Francina and Renzo Galanello and Monica V. E.
	Gallivan and Marianthi Georgitsi and Richard J. Gibbons and Piero
	C. Giordano and Cornelis L. Harteveld and James D. Hoyer and Martin
	Jarvis and Philippe Joly and Emmanuel Kanavakis and Panagoula Kollia
	and Stephan Menzel and Webb Miller and Kamran Moradkhani and John
	Old and Adamantia Papachatzopoulou and Manoussos N. Papadakis and
	Petros Papadopoulos and Sonja Pavlovic and Lucia Perseu and Milena
	Radmilovic and Cathy Riemer and Stefania Satta and Iris Schrijver
	and Maja Stojiljkovic and Swee Lay Thein and Jan Traeger-Synodinos
	and Ray Tully and Takahito Wada and John S. Waye and Claudia Wiemann
	and Branka Zukic and David H. K. Chui and Henri Wajcman and Ross
	C. Hardison and George P. Patrinos},
  title = {Systematic documentation and analysis of human genetic variation
	in hemoglobinopathies using the microattribution approach},
  journal = {Nature Genetics},
  volume = {43},
  date = {2011},
  issn = {1061-4036},
  pages = {295-301},
  doi = {10.1038/ng.785},
  timestamp = {2011-07-14}
}

@BOOK{gibaldi2003mhw,
  author = {Joseph Gibaldi},
  title = {{MLA} {Handbook} for Writers of Research Papers},
  date = {2003},
  publisher = {Modern Language Association of America},
  edition = {6},
  location = {New York},
  timestamp = {2011-06-09}
}

@BOOK{gibaldi2008msm,
  author = {Joseph Gibaldi},
  title = {{MLA} Style Manual and Guide to Scholarly Publishing},
  date = {2008},
  publisher = {Modern Language Association of America},
  isbn = {9780873522977},
  edition = {3},
  location = {New York},
  timestamp = {2011-06-09}
}

@REPORT{green2010wnp,
  author = {Toby Green},
  title = {We Need Publishing Standards for Datasets and Data Tables},
  type = {White Paper},
  institution = {OECD Publishing},
  date = {2010-02},
  doi = {10.1787/787355886123},
  timestamp = {2011-05-11}
}

@ARTICLE{groth.etal2010anp,
  author = {Groth, Paul and Gibson, Andrew and Velterop, Jan},
  title = {The Anatomy of a Nano-publication},
  journal = {Information Services and Use},
  volume = {30},
  number = {1/2},
  date = {2010-01},
  issn = {0167-5265},
  pages = {51--56},
  acmid = {1883690},
  address = {Amsterdam},
  doi = {10.3233/ISU-2010-0613},
  keywords = {Semantic Web, disambiguation, publication, rich RDF-triples},
  publisher = {IOS Press},
  timestamp = {2011-05-18}
}

@MANUAL{iso19101gir,
  author = {{ISO 19101}},
  title = {Geographic Information -- {Reference} Model},
  date = {2002},
  edition = {1},
  organization = {International Organization for Standardization},
  timestamp = {2011-05-12}
}

@MANUAL{iso27729,
  author = {{ISO/DIS 27729}},
  title = {Information and documentation -- {International} standard name identifier
	\mkbibparens{ISNI}},
  publisher = {International Organization for Standardization},
  series = {Draft International Standard},
  timestamp = {2011-06-02}
}

@ARTICLE{king2007idn,
  author = {Gary King},
  title = {An Introduction to the {Dataverse} {Network} as an Infrastructure
	for Data Sharing},
  journal = {Sociological Methods and Research},
  volume = {36},
  number = {2},
  date = {2007},
  issn = {0049-1241},
  doi = {10.1177/0049124107306660},
  timestamp = {2011-05-24}
}

@REPORT{lane2008dce,
  author = {Meredith A. Lane},
  title = {Data Citation in the Electronic Environment},
  type = {White Paper},
  institution = {Global Biodiversity Information Facility},
  date = {2008-09-10},
  timestamp = {2011-09-02},
  url = {http://www.danbif.dk/Documents/gbif-documents/DataCitation-Lane2008.pdf},
  urldate = {2011-09-02}
}

@ONLINE{lawrence2011cdo,
  author = {Bryan Lawrence},
  title = {Citation, {Digital} {Object} {Identifiers}, Persistence, Correction
	and Metadata},
  date = {2011-01-07},
  entrysubtype = {Blog post},
  timestamp = {2011-05-12},
  url = {http://home.badc.rl.ac.uk/lawrence/blog/2011/01/07/citation,_digital_object_identifiers,_persistence,_correction_and_metadata},
  urldate = {2011-05-12}
}

@ARTICLE{callaghan.etal2011cap,
  author = {Bryan Lawrence and Catherine Jones and Brian Matthews and Sam Pepler
	and Sarah Callaghan},
  title = {Citation and Peer Review of Data: Moving Towards Formal Data Publication},
  journal = {International Journal of Digital Curation},
  volume = {6},
  number = {2},
  date = {2011},
  issn = {1746-8256},
  pages = {4-37},
  timestamp = {2011-08-22},
  url = {http://www.ijdc.net/index.php/ijdc/article/view/181},
  urldate = {2011-08-31}
}

@REPORT{lawrence.etal2008dp,
  author = {Bryan N. Lawrence and Catherine M. Jones and Brian M. Matthews and
	Sam J. Pepler},
  title = {Data Publication},
  type = {Claddier Project Report},
  institution = {BADC},
  date = {2008-02-01},
  number = {3},
  timestamp = {2011-05-11},
  url = {http://purl.org/oai/oai:epubs.cclrc.ac.uk:work/43641},
  urldate = {2011-05-11}
}

@ONLINE{lord.etal2011okb,
  author = {Phillip Lord and Simon Cockell and Daniel C. Swan and Robert Stevens},
  title = {The {Ontogenesis} {Knowledgeblog}},
  date = {2011-06-07},
  organization = {Knowledge Blog},
  entrysubtype = {Blog post},
  subtitle = {Lightweight Semantic Publishing},
  timestamp = {2011-07-13},
  url = {http://knowledgeblog.org/128},
  urldate = {2011-07-13}
}

@INBOOK{lynch2009jgf,
  author = {Clifford Lynch},
  editor = {Tony Hey and Stewart Tansley and Kristin Tolle},
  title = {{Jim} {Gray's} Fourth Paradigm and the Construction of the Scientific
	Record},
  booktitle = {The Fourth Paradigm},
  date = {2009},
  publisher = {Microsoft Research},
  isbn = {978-0-9825442-0-4},
  location = {Redmond, WA},
  pages = {177-183},
  booksubtitle = {Data-Intensive Scientific Discovery},
  timestamp = {2011-07-14},
  url = {http://research.microsoft.com/en-us/collaboration/fourthparadigm/},
  urldate = {2010-07-14}
}

@BOOK{mackenzieowen2007sai,
  author = {Mackenzie Owen, John},
  title = {The Scientific Article in the Age of Digitization},
  date = {2007},
  publisher = {Springer},
  isbn = {1-4020-5335-5},
  series = {Information Science and Knowledge Management},
  number = {11},
  location = {Dordrecht},
  doi = {10.1007/1-4020-5340-1},
  timestamp = {2011-03-02}
}

@INPROCEEDINGS{matthews.etal2009pes,
  author = {Matthews, Brian and Duncan, Alastair and Jones, Catherine and Neylon,
	Cameron and Borkum, Mark and Coles, Simon and Hunter, Philip},
  title = {A Protocol for Exchanging Scientific Citations},
  booktitle = {Fifth {IEEE} {International} {Conference} on {e-Science} {(e-Science}
	2009)},
  date = {2009-12},
  publisher = {IEEE Computer Society},
  isbn = {978-0-7695-3877-8},
  location = {Los Alamitos, CA},
  pages = {171--177},
  __markedentry = {[Alex Ball]},
  doi = {10.1109/e-Science.2009.32},
  timestamp = {2011-05-18}
}

@REPORT{matthews.etal2007rdp,
  author = {Brian Matthews and Katherine Portwin and Catherine Jones and Bryan
	Lawrence},
  title = {Recommendations for Data\slash Publication Linkage},
  type = {CLADDIER Project Report},
  institution = {STFC},
  date = {2007-11-30},
  number = {3},
  version = {1.0},
  timestamp = {2011-05-18},
  url = {http://ie-repository.jisc.ac.uk/221/},
  urldate = {2012-06-20}
}

@UNPUBLISHED{newton.etal2010ddc,
  author = {Mark P. Newton and Hailey Mooney and Michael Witt},
  title = {A Description of Data Citation Instructions in Style Guides},
  date = {2010},
  howpublished = {Poster presented at the 6th International Digital Curation Conference,
	Chicago, IL, 7--8 December 2010.},
  timestamp = {2011-08-24},
  url = {http://docs.lib.purdue.edu/lib_research/121/},
  urldate = {2011-08-24}
}

@ONLINE{page2009spt,
  author = {Roderic Page},
  title = {Semantic Publishing},
  date = {2009-04-20},
  organization = {the iPhylo blog},
  entrysubtype = {Blog post},
  subtitle = {Towards Real Integration by Linking},
  timestamp = {2011-05-11},
  url = {http://iphylo.blogspot.com/2009/04/semantic-publishing-towards-real.html},
  urldate = {2011-05-11}
}

@REPORT{penev.etal2011pdp,
  author = {Lyubomir Penev and Daniel Mietchen and Vishwas Chavan and Gregor
	Hagedorn and David Remsen and Vincent Smith and David Shotton},
  title = {{Pensoft} Data Publishing Policies and Guidelines for Biodiversity
	Data},
  institution = {Pensoft},
  date = {2011-05-26},
  timestamp = {2011-07-04},
  url = {http://www.pensoft.net/J_FILES/Pensoft_Data_Publishing_Policies_and_Guidelines.pdf},
  urldate = {2011-07-04}
}

@ONLINE{piwowar2011lfd,
  author = {Heather Piwowar},
  title = {Links from the Data Collection Article},
  date = {2011-05-05},
  organization = {the Research Remix blog},
  entrysubtype = {Blog post},
  subtitle = {Inline or in the Bibliography?},
  timestamp = {2011-06-03},
  url = {http://researchremix.wordpress.com/2011/05/05/inline-or-biblio/},
  urldate = {2011-06-03}
}

@INPROCEEDINGS{shotton2009cct,
  author = {David Shotton},
  editor = {Phillip Lord and Nigam Shah and Susanna-Assunta Sansone and Susie
	Stephens and Larisa Soldatova},
  title = {{CiTO,} the {Citation} {Typing} {Ontology,} and its Use for Annotation
	of Reference Lists and Visualization of Citation Networks},
  booktitle = {Proceedings of the 12th {Annual} {Bio-Ontologies} {Meeting}},
  date = {2009-06-28},
  venue = {Stockholm, Sweden},
  pages = {53-56},
  timestamp = {2011-08-17},
  url = {http://bio-ontologies.org.uk/2009/download/Bio-Ontologies2009.pdf#page=53},
  urldate = {2011-08-17}
}

@ARTICLE{shotton2010cct,
  author = {David Shotton},
  title = {{CiTO,} the {Citation} {Typing} {Ontology}},
  journal = {Journal of Biomedical Semantics},
  volume = {1},
  number = {Suppl 1},
  date = {2010},
  issn = {2041-1480},
  pages = {S6},
  doi = {10.1186/2041-1480-1-S1-S6},
  timestamp = {2011-08-17}
}

@MANUAL{shotton.peroni2011cct,
  author = {David Shotton and Silvio Peroni},
  title = {{CiTO}, the {Citation} {Typing} {Ontology}},
  date = {2011-03-30},
  version = {2.0},
  timestamp = {2011-05-26},
  url = {http://purl.org/spar/cito/},
  urldate = {2011-05-26}
}

@MANUAL{shotton.peroni2011cdc,
  author = {David Shotton and Silvio Peroni},
  title = {{CiTO4Data}, the {Citation} {Typing} {Ontology} for {Data}},
  date = {2011-02-25},
  version = {1.0},
  timestamp = {2011-07-04},
  url = {http://purl.org/spar/cito4data/},
  urldate = {2011-05-26}
}

@ARTICLE{sieber.trumbo1995ngc,
  author = {Sieber, Joan and Trumbo, Bruce},
  title = {{(Not)} Giving Credit Where Credit is Due},
  journal = {Science and Engineering Ethics},
  volume = {1},
  number = {1},
  date = {1995},
  issn = {1353-3452},
  pages = {11-20},
  affiliation = {California State University, Hayward Dept. of Psychology 94542 Hayward
	CA USA 94542 Hayward CA USA},
  doi = {10.1007/BF02628694},
  keyword = {Humanities, Social Sciences and Law},
  publisher = {Springer Netherlands},
  subtitle = {Citation of Data Sets},
  timestamp = {2011-06-08}
}

@ONLINE{sixapart2002tts,
  author = {{Six Apart}},
  title = {{TrackBack} Manual},
  date = {2007},
  timestamp = {2011-05-18},
  url = {http://www.movabletype.org/documentation/trackback_manual.html},
  urldate = {2011-10-18}
}

@ARTICLE{starr.gastl2011ims,
  author = {Joan Starr and Angela Gastl},
  title = {{isCitedBy}},
  journal = {D-Lib Magazine},
  volume = {17},
  number = {1/2},
  date = {2011},
  issn = {1082-9873},
  doi = {10.1045/january2011-starr},
  subtitle = {A Metadata Scheme for {DataCite}},
  timestamp = {2011-05-11}
}

@ARTICLE{stodden2009err,
  author = {Victoria Stodden},
  title = {Enabling Reproducible Research},
  journal = {International Journal of Communications Law and Policy},
  volume = {13},
  date = {2009},
  issn = {1439-6262},
  pages = {1-25},
  subtitle = {Open Licensing for Scientific Innovation},
  timestamp = {2010-09-02},
  url = {http://www.ijclp.net/files/ijclp_web-doc_1-13-2009.pdf},
  urldate = {2010-09-02}
}

@ONLINE{wilkinson2011syw,
  author = {Max Wilkinson},
  title = {So You Want to Cite your Data},
  date = {2011-07-28},
  organization = {the SageCite Knowledge Blog},
  entrysubtype = {Blog post},
  subtitle = {The Consequences of Data Citation},
  timestamp = {2011-08-17},
  url = {http://sagecite.knowledgeblog.org/2011/07/28/why-do-we-need-datacitation/},
  urldate = {2011-08-16}
}

@ONLINE{wilkinson2011wdw,
  author = {Max Wilkinson},
  title = {Why Do We Need Data Citation},
  date = {2011-07-28},
  organization = {the SageCite Knowledge Blog},
  entrysubtype = {Blog post},
  subtitle = {Take Two},
  timestamp = {2011-08-17},
  url = {http://sagecite.knowledgeblog.org/2011/07/28/why-do-we-need-data-citation-take-two/},
  urldate = {2011-08-16}
}

@MANUAL{adida.birbeck2008rp,
  editor = {Ben Adida and Mark Birbeck},
  title = {{RDFa} Primer},
  date = {2008-10-14},
  publisher = {World Wide Web Consortium},
  series = {W3C Working Group Note},
  timestamp = {2011-06-01},
  url = {http://www.w3.org/TR/xhtml-rdfa-primer/},
  urldate = {2011-06-01}
}

@MANUAL{w3c2011hm,
  editor = {Ian Hickson},
  title = {{HTML} Microdata},
  date = {2011-05-25},
  publisher = {World Wide Web Consortium},
  series = {W3C Working Draft},
  timestamp = {2011-07-04},
  url = {http://www.w3.org/TR/2011/WD-microdata-20110525/},
  urldate = {2011-07-04}
}

@MANUAL{lagoze.etal2008oug,
  editor = {Carl Lagoze and Herbert {Van de Sompel} and Pete Johnston and Michael
	Nelson and Robert Sanderson and Simeon Warner},
  title = {{ORE} User Guide},
  date = {2008-10-17},
  publisher = {Open Archives Initiative},
  version = {1.0},
  subtitle = {Primer},
  timestamp = {2011-06-01},
  url = {http://www.openarchives.org/ore/1.0/primer},
  urldate = {2011-06-01}
}

@BOOK{ritter2002oms,
  editor = {R. M. Ritter},
  title = {{Oxford} {Manual} of {Style}},
  date = {2002},
  publisher = {Oxford University Press},
  location = {Oxford, UK},
  timestamp = {2011-06-09}
}

@MANUAL{sefton2011shc,
  editor = {Peter Sefton},
  title = {Scholarly {HTML} Core},
  date = {2011-05-03},
  timestamp = {2011-07-14},
  url = {http://scholarlyhtml.org/2011/05/03/scholarly-html-core-3/},
  urldate = {2011-07-14}
}

@ONLINE{ands2011dca,
  title = {Data Citation},
  date = {2011-05-03},
  organization = {the Australian National Data Service},
  entrysubtype = {Awareness Level Guide},
  timestamp = {2011-06-06},
  url = {http://www.ands.org.au/guides/data-citation-awareness.html},
  urldate = {2011-06-06}
}

@BOOK{apa2001pma,
  title = {{Publication} {Manual} of the {American} {Psychological} {Association}},
  date = {2001},
  publisher = {American Psychological Association},
  edition = {5},
  location = {Washington, DC},
  timestamp = {2011-06-09}
}

@BOOK{apa2010pma,
  title = {{Publication} {Manual} of the {American} {Psychological} {Association}},
  date = {2010},
  publisher = {American Psychological Association},
  edition = {6},
  location = {Washington, DC},
  timestamp = {2011-06-09}
}

@MANUAL{dsab2010dsa,
  title = {Data {Seal} of {Approval}},
  date = {2010-05-03},
  publisher = {Data Seal of Approval Board},
  version = {2.0},
  isbn = {978-9490-531-02-7},
  subtitle = {Quality Guidelines for Digital Research Data},
  timestamp = {2010-03-15},
  url = {http://assessment.datasealofapproval.org/documentation/},
  urldate = {2011-06-29}
}

@ONLINE{icpsr2011whs,
  title = {Why and How Should {I} Cite Data?},
  date = {2009-06-23},
  organization = {the Inter-University Consortium for Political and Social Research},
  timestamp = {2011-06-08},
  url = {http://icpsr-support.blogspot.com/2008/10/why-and-how-should-i-cite-data.html},
  urldate = {2011-06-08}
}

@REPORT{rin.nesta2010oac,
  title = {Open to All?},
  institution = {Research Information Network and {National Endowment for Science,
	Technology and the Arts}},
  date = {2010-09},
  subtitle = {Case Studies of Openness in Research},
  timestamp = {2010-11-23},
  url = {http://www.rin.ac.uk/system/files/attachments/NESTA-RIN_Open_Science_V01_0.pdf},
  urldate = {2011-05-01}
}

@REPORT{rin2008afs,
  title = {Acknowledgement of Funders in Scholarly Journal Articles},
  institution = {Research Information Network},
  date = {2008-02},
  subtitle = {Guidance for {UK} Research Funders, Authors and Publishers},
  timestamp = {2011-06-03},
  url = {http://www.rin.ac.uk/our-work/research-funding-policy-and-guidance/acknowledgement-funders-journal-articles},
  urldate = {2011-06-03}
}

@BOOK{ucp2010cms,
  title = {{Chicago} {Manual} of {Style}},
  date = {2010},
  publisher = {University of Chicago Press},
  edition = {16},
  location = {Chicago, IL},
  timestamp = {2011-06-09}
}
%LITERAL
%</bib>
%<*template>
\documentclass[twocolumn,numbers]{dcchowto}
$if(biblio-files)$
\bibliography{$biblio-files$}
$endif$
\renewcommand*{\bibfont}{\small}
\ifdraftdoc
	\usepackage{embedfile}
	\embedfile[desc={Source code for this document}]{\jobname.tex}
	$if(biblio-files)$
	\embedfile[desc={Biblatex database for this document}]{$biblio-files$}
	$endif$
%<internal>\iffalse
%<template>\fi

$if(title)$
\title{$title$}
$endif$
$for(author)$
\author{$author$}
$endfor$
\date{$date$}
$for(partner)$
\partner{$partner$}
$endfor$
$for(partnerlogo)$
\partnerlogo{$partnerlogo$}
$endfor$

\usepackage{environ}

\let\oldquote=\quote
\let\endoldquote=\endquote
\let\quote\relax
\let\endquote\relax

\NewEnviron{quote}{%
  \global\let\tmp\BODY\aftergroup\docoverandabstract
}

\def\docoverandabstract{%
  \let\quote=\oldquote
  \let\endquote=\endoldquote
  \maketitle[\tmp]%
}

\begin{document}
$for(include-before)$
$include-before$
$endfor$
$body$
$if(furtherinfo)$
$for(furtherinfo)$
\nocite{$furtherinfo$}
$endfor$
\printbibliography[category=notcited]
$endif$

\textbf{Please cite as:} \DCCHowtoAuthorAPA\ (\the\year). ‘\thetitle’. \emph{DCC How-to Guides}. Edinburgh: Digital Curation Centre. Available online: \url{http://www.dcc.ac.uk/resources/how-guides}

\vfill
\noindent\bfseries\begingroup\color{dccblue}
Follow the DCC on Twitter: \href{http://twitter.com/#!/digitalcuration}{@digitalcuration}, \href{https://twitter.com/hashtag/ukdcc}{\#ukdcc}

\vfill
\raggedleft\mdseries\footnotesize Revised: \ifx\undefined\thedate\today\else\thedate\fi\par
\endgroup
$for(include-after)$
$include-after$
$endfor$
\end{document}
%</template>
%<*htemplate>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"$if(lang)$ lang="$lang$" xml:lang="$lang$"$endif$>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />
$for(author-meta)$
<meta name="author" content="$author-meta$" />
$endfor$
$if(date-meta)$
<meta name="date" content="$date-meta$" />
$endif$
<title>$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$</title>
<style type="text/css">
code {
  white-space: pre;
}
div.div_highlight {
  border: 1px solid #C0C0C0;
  padding: 1em 1em 0px;
  margin-bottom: 1em;
}
</style>
$if(quotes)$
<style type="text/css">q { quotes: "“" "”" "‘" "’"; }</style>
$endif$
$if(highlighting-css)$
<style type="text/css">
$highlighting-css$
</style>
$endif$
$for(css)$
<link rel="stylesheet" href="$css$" $if(html5)$$else$type="text/css" $endif$/>
$endfor$
$if(math)$
$math$
$endif$
$for(header-includes)$
$header-includes$
$endfor$
</head>
<body>
$for(include-before)$
$include-before$
$endfor$
$if(title)$
<div id="$idprefix$header">
<h1 class="title">$title$</h1>
$if(subtitle)$
<h1 class="subtitle">$subtitle$</h1>
$endif$
<p>By $for(author)$$author$$sep$, $endfor$</p>
$if(date)$
<p>Last updated: $date$</p>
$endif$
</div>
$endif$
$if(title)$$if(date)$
<div class="div_highlight">
Please cite as: $for(author)$$author$$sep$, $endfor$ ($date$). ‘$title$’.
<em>DCC How-to Guides.</em> Edinburgh: Digital Curation Centre. Available online:
<a href="http://www.dcc.ac.uk/resources/how-guides">http://www.dcc.ac.uk/resources/how-guides</a>
</div>
$endif$$endif$
$if(toc)$
<div id="$idprefix$TOC">
$toc$
</div>
$endif$
$body$
$for(include-after)$
$include-after$
$endfor$
</body>
</html>
%</htemplate>
%<*internal>
\fi
\def\nameofplainTeX{plain}
\ifx\fmtname\nameofplainTeX\else
  \expandafter\begingroup
\fi
%</internal>
%<*install>
\input docstrip.tex
\keepsilent
\askforoverwritefalse
\preamble
----------------------------------------------------------------
dcchowto --- A LaTeX class for DCC How-to Guides
Author:  Alex Ball
E-mail:  a.ball@ukoln.ac.uk
License: Released under the LaTeX Project Public License v1.3c or later
See:     http://www.latex-project.org/lppl.txt
----------------------------------------------------------------

\endpreamble
\postamble

Copyright (C) 2014 by Alex Ball <a.ball@ukoln.ac.uk>
\endpostamble

\usedir{tex/latex/\jobname}
\generate{
  \file{\jobname.cls}{\from{\jobname.dtx}{class}}
  \file{\jobname-template.latex}{\from{\jobname.dtx}{template}}
}
%</install>
%<install>\endbatchfile
%<*internal>
\usedir{source/latex/\jobname}
\generate{
  \file{\jobname.ins}{\from{\jobname.dtx}{install}}
}
\nopreamble\nopostamble
\usedir{tex/latex/\jobname}
\generate{
  \file{\jobname-apa.csl}{\from{\jobname.dtx}{csl}}
  \file{\jobname-template.html}{\from{\jobname.dtx}{htemplate}}
}
\usedir{doc/latex/\jobname}
\generate{
  \file{README.md}{\from{\jobname.dtx}{readme}}
  \file{\jobname-example.md}{\from{\jobname.dtx}{example}}
  \file{\jobname-example.bib}{\from{\jobname.dtx}{bib}}
}
\ifx\fmtname\nameofplainTeX
  \expandafter\endbatchfile
\else
  \expandafter\endgroup
\fi
%</internal>
%<*driver>
\ProvidesFile{dcchowto.dtx}
%</driver>
%<class>\NeedsTeXFormat{LaTeX2e}[1999/12/01]
%<class>\ProvidesClass{dcchowto}
%<*class>
    [2014/10/03 v3.00 A LaTeX class for DCC How-to Guides]
%</class>
%<*driver>
\documentclass[12pt]{article}
% Page Layout
\usepackage[a4paper,hmargin=30mm,vmargin=25mm,nohead]{geometry}
% Typography
\RequirePackage[charter,expert]{mathdesign}
\makeatletter
\def\hrulefill{\leavevmode\leaders \hrule height \rulethickness \hfill\kern\z@}
\makeatother
\RequirePackage{iftex}
\ifPDFTeX
  \RequirePackage[utf8]{inputenc}
  \RequirePackage[T1]{fontenc}
  \RequirePackage[scaled=0.96,sups]{XCharter}
  \RequirePackage[scaled=0.95,tabular]{sourcesanspro}
  \RequirePackage[varl,varqu]{zi4}
\else
  \RequirePackage{fontspec}
  \setmainfont
    [Scale=0.96
    ,Ligatures=TeX
    ]%
    {Charis SIL}
  \setsansfont
    [Scale=MatchLowercase
    ,Ligatures=TeX
    ,StylisticSet=4
    ,BoldFont={Source Sans Pro Bold}
    ,ItalicFont={Source Sans Pro Italic}
    ,BoldItalicFont={Source Sans Pro Bold Italic}
    ]%
    {Source Sans Pro}
  \setmonofont
    [Scale=MatchLowercase
    ,RawFeature={extend=0.83}
    ,BoldFont={Source Code Pro Bold}
    ,BoldItalicFont={Source Code Pro Bold}
    ,AutoFakeSlant=0.2
    ,ItalicFeatures={StylisticSet=2,StylisticSet=3}
    ,BoldItalicFeatures={FakeSlant=0.2,StylisticSet=2,StylisticSet=3}
    ]%
    {Source Code Pro}
\fi
% Improving the look of the documentation
\usepackage{hypdoc}
\hypersetup{bookmarks,raiselinks,pageanchor,hyperindex,colorlinks}
\usepackage{tcolorbox}
\tcbuselibrary{documentation,breakable,minted}
\tcbset
  { listing engine=minted
  , index format=doc
  }
\makeatletter
\AtBeginDocument{%
  % Comments
  \def\PY@tok@c{\def\PY@tc##1{\textcolor{gray}{##1}}}
  % Command sequences
  \def\PY@tok@k{\def\PY@tc##1{\textcolor{red!75!black}{##1}}}
  % Optional arguments
  \def\PY@tok@na{\def\PY@tc##1{\textcolor{violet}{##1}}}
  % Braces
  \def\PY@tok@nb{\def\PY@tc##1{\textcolor{blue!75!black}{##1}}}
}
\makeatother
\newcommand{\pkg}[1]{\href{http://www.ctan.org/pkg/#1}{\textsf{#1}}}
\MakeShortVerb{\|}
\makeatletter
\let\PrintMacroName\@gobble
\let\PrintEnvName\@gobble
\renewenvironment{tcb@manual@entry}{\begin{list}{}{%
  \setlength{\topsep}{0pt}
  \setlength{\partopsep}{0pt}
  \setlength{\leftmargin}{\kvtcb@doc@left}%
  \setlength{\itemindent}{0pt}%
  \setlength{\itemsep}{0pt}%
  \setlength{\parsep}{0pt}%
  \setlength{\rightmargin}{\kvtcb@doc@right}%
  }\item}{\end{list}}
\makeatother
% This bit inspired by ydoc
\makeatletter
\newwrite\ydocwrite
\def\ydocfname{\jobname.cod}
\def\ydoc@catcodes{%
  \let\do\@makeother
  \dospecials
  \catcode`\\=\active
  \catcode`\^^M=\active
  \catcode`\ =\active
}
\def\macrocode{%
  \begingroup
  \ydoc@catcodes
  \macro@code
}
\def\endmacrocode{}
\begingroup
\endlinechar\m@ne
\@firstofone{%
\catcode`\|=0\relax
\catcode`\(=1\relax
\catcode`\)=2\relax
\catcode`\*=14\relax
\catcode`\{=12\relax
\catcode`\}=12\relax
\catcode`\ =12\relax
\catcode`\%=12\relax
\catcode`\\=\active
\catcode`\^^M=\active
\catcode`\ =\active
}*
|gdef|macro@code#1^^M%    \end{macrocode}(*
|endgroup|expandafter|macro@@code|expandafter(|ydoc@removeline#1|noexpand|lastlinemacro)*
)*
|gdef|ydoc@removeline#1^^M(|noexpand|firstlinemacro)*
|gdef|ydoc@defspecialmacros(*
|def^^M(|noexpand|newlinemacro)*
|def (|noexpand|spacemacro)*
|def\(|noexpand|bslashmacro)*
)*
|gdef|ydoc@defrevspecialmacros(*
|def|newlinemacro(|noexpand^^M)*
|def|spacemacro(|noexpand )*
|def|bslashmacro(|noexpand\)*
)*
|endgroup
\def\macro@@code#1{%
  {\ydoc@defspecialmacros
  \xdef\themacrocode{#1}}%
  \PrintMacroCode
  \end{macrocode}%
}
\def\PrintMacroCode{%
  \begingroup
  \let\firstlinemacro\empty
  \let\lastlinemacro\empty
  \def\newlinemacro{^^J}%
  \let\bslashmacro\bslash
  \let\spacemacro\space
  \immediate\openout\ydocwrite=\ydocfname\relax
  \immediate\write\ydocwrite{\themacrocode}%
  \immediate\closeout\ydocwrite
  \let\input\@input
  \tcbinputlisting{breakable,listing only,docexample,listing file=\ydocfname}%
  \endgroup
}
\makeatother
%minted options={fontsize=\footnotesize},

\EnableCrossrefs
\CodelineIndex
\RecordChanges
\begin{document}

\GetFileInfo{\jobname.dtx}
\DoNotIndex{\newcommand,\newenvironment}

\title{\textsf{dcchowto} --- A LaTeX class for DCC How-to Guides}
\author{Alex Ball}
\date{Class \fileversion\ --- \filedate}

\maketitle

\changes{v3.00}{2014/10/03}{New version based on transforming Markdown.}

\begin{abstract}
To contact the author about this package, please visit the GitHub
page where the code is hosted: \url{https://github.com/alex-ball/dcchowto}.
\end{abstract}

\section{Usage}

\subsection{Loading the class}

The class is loaded in the usual way:

\begin{tcolorbox}[docexample,fontupper=\small]
\begin{docCommand*}{documentclass}{\oarg{options}\brackets{dcchowto}}
\end{docCommand*}
\end{tcolorbox}

The following options are recognised:

\begin{docKey}{twocolumn}{}{default \texttt{true}, initially \texttt{false}}
  The default layout is to have a single column of text,
  with a wide right-hand margin for side notes.
  With this option,
  the layout changes to use two columns of text and footnotes instead.
\end{docKey}

\begin{docKey}{press}{}{default \texttt{true}, initially \texttt{false}}
  The default is to lay the PDF out just like the hard copy.
  With this option, extra margins, trim marks and colour bleeds
  are added round the edges for professional printing.
\end{docKey}

\begin{docKey}{numbers}{}{default \texttt{true}, initially \texttt{false}}
  The default is not to have page numbers.
  With this option, page numbers are added to the footer of most pages.
\end{docKey}

\begin{docKey}{mark}{=\meta{mark type}}{default \texttt{draft}}
  This marks the PDF as not being ready for public release.
  The two possible values for \meta{mark type} are
  \docValue{draft} for a working draft,
  and
  \docValue{rc} for a release candidate.
\end{docKey}

\subsection{Preamble}

The class loads \pkg{biblatex} to handle references.
Please ensure any database file you write uses the \pkg{biblatex} model,
and load it like this:

\begin{tcolorbox}[docexample,fontupper=\small]
\begin{docCommand*}{bibliography}{\marg{filename}}
\end{docCommand*}
\end{tcolorbox}

Fill out \cs{title} and \cs{date} as normal.
Please repeat the \cs{author} command for each author,
rather than linking names together with \cs{and}.
You can add the affiliation of the author in parentheses,
as follows:

\begin{dispListing}
\author{Alex Ball (DCC)}
\author{Monica Duke (DCC)}
\end{dispListing}

For joint branding two further commands are defined:

\begin{docCommand}{partner}{\marg{text}}
  The \meta{text} should be the name of an organisation which has
  contributed to the guide.
  The command can and should be repeated if several organisations should
  be mentioned.
\end{docCommand}

\begin{docCommand}{partnerlogo}{\marg{image command}}
  This command puts the logo of the partner organisation on the cover.
  The \meta{image command} should be something like
  \cs{includegraphics}\marg{filename}.
  This allows you the freedom to shift the image around a bit using boxes,
  or draw the logo instead using \pkg{pstricks} or \pkg{pgf}.
\end{docCommand}

\subsection{Body}

\begin{docCommand}{makehowtotitle}{\oarg{abstract}}
  Use this instead of \cs{maketitle} to lay out the cover page and
  introductory paragraph, the text for which should be provided as the
  \meta{abstract}.
\end{docCommand}

\begin{docEnvironment}{boxout}{}
  Use this to set off some content in a red box.
  Note that the box will not break over columns or pages.
\end{docEnvironment}

\begin{docEnvironment}{fillboxout}{}
  Use this to set off some content using a peachy background.
  It is intended for use with figures.
  Note that the box will not break over columns or pages.
\end{docEnvironment}

\StopEventually{^^A
  \PrintChanges
  \PrintIndex
}

\section{Implementation}

\DocInput{\jobname.dtx}
\end{document}
%</driver>
% \fi
% \iffalse
%<*class>
% \fi
% 
% \subsection{Options}
% 
% We use \pkg{xkeyval} for setting options.
%    \begin{macrocode}
\RequirePackage{xkeyval}
\define@boolkey{dcchowto}{twocolumn}[true]{}
\define@boolkey{dcchowto}{press}[true]{}
\define@boolkey{dcchowto}{numbers}[true]{}
\define@choicekey*{dcchowto.cls}{mark}[\dcchowto@mark@input\dcchowto@mark@index]{draft,rc}[draft]{%
  \ifcase\dcchowto@mark@index\relax
    \def\dcchowto@mark{Draft}
  \or
    \def\dcchowto@mark{Release Candidate}
  \fi
}
\ProcessOptionsX<dcchowto>
\ifKV@dcchowto@twocolumn
  \ClassInfo{dcchowto}{Processing in two-column mode}%
\else
  \ClassInfo{dcchowto}{Processing in one-column mode}%
  \PassOptionsToClass{oneside}{memoir}%
\fi  
%    \end{macrocode}
% 
% \subsection{Fonts}
%
% The class uses Gill Sans if available, otherwise it falls back to Lato or,
% failing that, Helvetica.
% TODO: add option to load Gill Sans using \pkg{fontspec}.
% 
%    \begin{macrocode}
\IfFileExists{gillsans.sty}{%
  \newcommand*{\memfontfamily}{bgs}
  \newcommand*{\memfontenc}{T1}
  \newcommand*{\memfontpack}{gillsans}
  \RequirePackage{arevmath}
  \SetSymbolFont{operators}{normal}{T1}{bgs}{m}{n}
  \SetSymbolFont{letters}{normal}{T1}{bgs}{m}{it}
  \RequirePackage[scaled=0.824]{beramono}
}{%
  \IfFileExists{lato.sty}{%
    \PassOptionsToPackage{defaultsans}{lato}
    \newcommand*{\memfontfamily}{fla}
    \newcommand*{\memfontenc}{T1}
    \newcommand*{\memfontpack}{lato}
    \def\lato@scale{s*[0.9]}
    \def\lightseries{\fontseries{l}\selectfont}
    \SetSymbolFont{operators}{normal}{T1}{fla}{m}{n}
    \SetSymbolFont{letters}{normal}{T1}{fla}{m}{it}
    \RequirePackage[scaled=0.824]{beramono}
  }{%
    \newcommand*{\memfontfamily}{phv}
    \newcommand*{\memfontenc}{T1}
    \newcommand*{\memfontpack}{helvet}
    \def\Hv@scale{0.88}
    \def\lightseries{\mdseries}
    \SetSymbolFont{operators}{normal}{T1}{phv}{m}{n}
    \SetSymbolFont{letters}{normal}{T1}{phv}{m}{it}
  }%
}
\renewcommand{\familydefault}{\sfdefault}
%    \end{macrocode}
%
% \subsection{Basic setup}
%
% Base class
%    
%    \begin{macrocode}
\LoadClass[a4paper,11pt,extrafontsizes]{memoir}[2008/05/26]
%    \end{macrocode}
%
% Utilities
%
%    \begin{macrocode}
\RequirePackage{etoolbox,xstring}
%    \end{macrocode}
%
% Language tools
%
%    \begin{macrocode}
\RequirePackage[british]{babel}
\RequirePackage[utf8]{inputenc}
\RequirePackage{csquotes}
%    \end{macrocode}
%
% By default graphics are scaled to fill the available space while keeping
% their original aspect ratio.
% 
%    \begin{macrocode}
\RequirePackage{graphicx}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
%    \end{macrocode}
%
% The DCC logo contains three shades of orange and two of blue.
% The How-to Guide design adds a maroon and a peach.
% 
%    \begin{macrocode}
\RequirePackage[svgnames]{xcolor}
\xdefinecolor{dccdarkorange}{RGB}{255,102,0}
\xdefinecolor{dccmidorange}{RGB}{255,153,0}
\xdefinecolor{dccpaleorange}{RGB}{255,204,0}
\xdefinecolor{dccblue}{RGB}{47,72,158}
\xdefinecolor{dccpaleblue}{RGB}{119,161,219}
\xdefinecolor{dccmaroon}{RGB}{157,22,27}
\xdefinecolor{dccpeach}{RGB}{255,235,213}
%    \end{macrocode}
%
% Formatting aids
%
%    \begin{macrocode}
\RequirePackage{footnote,enumitem}
%    \end{macrocode}
%
% Links and PDF information
% 
%    \begin{macrocode}
\RequirePackage{hyperref}
\AtBeginDocument{%
  \hypersetup
  {pdfborder={0 0 0}%
    ,pdfauthor=\dcchowto@author@pdf
    ,pdftitle=\thetitle
  }%
  \urlstyle{tt}%
}
%    \end{macrocode}
%
% \subsection{DCC Logo}
%
% The DCC logo is drawn using \pkg{tikz} for perfect fidelity.
%
%    \begin{macrocode}
\RequirePackage{tikz}
%    \end{macrocode}
%
% We provide options for scaling the logo without changing the aspect ratio.
% Two lengths are needed to scale the logo:
% \begin{itemize}
%   \item |\dccl@unit| is the actual scale factor;
%   \item |\dccl@unit@calc| is the scale factor calculated from the options.
% \end{itemize}
%
%    \begin{macrocode}
\newlength{\dccl@unit}
\newlength{\dccl@unit@calc}
%    \end{macrocode}
%
% The |height| option sets the maximum height for the logo.
% With |\dccl@unit| set to 1pt, the logo ends up 32.75pt high. So we
% calculate what |\dccl@unit| would need to be to achieve the target height.
% We store this in |\dccl@unit@calc| unless |\dccl@unit@calc| is a shorter
% (but non-zero) length.
%
%    \begin{macrocode}
\define@key{dccl}{height}{%
  \setlength{\@tempdima}{#1}%
  \setlength{\@tempdimb}{\@tempdima / \real{32.75}}%
  \ifthenelse{%
    \lengthtest{\dccl@unit@calc = 0pt}\OR
    \lengthtest{\@tempdimb < \dccl@unit@calc}%
  }{%
  \setlength{\dccl@unit@calc}{\@tempdimb}%
}{}%
}
%    \end{macrocode}
%
% The |width| option sets the maximum width for the logo.
% With |\dccl@unit| set to 1pt, the logo ends up 149.891pt wide. So we
% calculate what |\dccl@unit| would need to be to achieve the target width.
% We store this in |\dccl@unit@calc| unless |\dccl@unit@calc| is a shorter
% (but non-zero) length.
%
%    \begin{macrocode}
\define@key{dccl}{width}{%
  \setlength{\@tempdima}{#1}%
  \setlength{\@tempdimb}{\@tempdima / \real{149.891}}%
  \ifthenelse{%
    \lengthtest{\dccl@unit@calc = 0pt}\OR
    \lengthtest{\@tempdimb < \dccl@unit@calc}%
  }{%
  \setlength{\dccl@unit@calc}{\@tempdimb}%
}{}%
}
%    \end{macrocode}
%
% We also provide the option |scale| for unconditionally setting the scale to a
% given numeric factor, where 1 means |\dccl@unit| equals 1pt.
%
%    \begin{macrocode}
\define@key{dccl}{scale}{%
  \setlength{\@tempdima}{1pt}%
  \setlength{\dccl@unit@calc}{#1\@tempdima}%
}
%    \end{macrocode}
%
% In case the logo is put on a dark background, we provide the option
% |white| for writing the text portions in white.
%
%    \begin{macrocode}
\colorlet{letters}{dccblue}
\colorlet{pipes}{dccpaleblue}
\define@key{dccl}{white}[white]{\colorlet{letters}{#1}\colorlet{pipes}{#1}}
%    \end{macrocode}
%
% The logo itself is drawn with the |\dcclogo| command. The \pkg{xkeyval} options
% are read from the optional argument. There is no mandatory argument.
%
%    \begin{macrocode}
\newcommand{\dcclogo}[1][]{%
  \bgroup
%    \end{macrocode}
%
% First we reset |\dccl@unit@calc| to 0pt, then read in the user keys.
%
%    \begin{macrocode}
  \setkeys{dccl}{scale=0,#1}%
%    \end{macrocode}
%
% If |\dccl@unit@calc| has been set, we scale the logo accordingly. Otherwise
% we use the default scale of |\dccl@unit| = 1pt.
%
%    \begin{macrocode}
  \ifthenelse{\lengthtest{\dccl@unit@calc > 0pt}}{%
    \setlength{\dccl@unit}{\dccl@unit@calc}%
  }{%
    \setlength{\dccl@unit}{1pt}%
  }%
%    \end{macrocode}
%
% Now we come to draw the logo.
%
%    \begin{macrocode}
  \begin{tikzpicture}
    [ y=\dccl@unit
    , x=\dccl@unit
    , inner sep=0pt
    , outer sep=0pt
    , nonzero rule
    , line join=miter
    , miter limit=4.00
    , line cap=butt
    , line width=\dccl@unit
    , baseline=5.5040\dccl@unit
    ]
    \draw[white,fill=dccdarkorange] % Top square
      (0.5000,15.5000) --
      (15.2500,15.5000) --
      (15.2500,30.5000) --
      (0.5000,30.5000) --
      cycle;
    \draw[white,fill=dccmidorange] % Middle square
      (5.6250,10.2500) --
      (20.3750,10.2500) --
      (20.3750,25.2500) --
      (5.6250,25.2500) --
      cycle;
    \draw[white,fill=dccpaleorange] % Bottom square
      (10.8750,4.5000) --
      (25.6250,4.5000) --
      (25.6250,19.5000) --
      (10.8750,19.5000) --
      cycle;
    \draw[pipes] % First divider
      (37.1250,32.2500) --
      (37.1250,0.5000);
    \fill[letters] % D, counter first
      (51.9380,25.6910) --
      (57.0620,25.6910) .. controls (63.5470,25.6910) and (66.5000,21.7500) ..
      (66.5000,17.0940) .. controls (66.5000,14.2380) and (64.7700,8.4960) ..
      (57.2340,8.4960) --
      (51.9380,8.4960) --
      cycle
      (48.6250,5.5040) --
      (57.6410,5.5040) .. controls (65.2810,5.5040) and (69.9340,11.1480) ..
      (69.9340,17.0940) .. controls (69.9340,22.5660) and (66.1600,28.6840) ..
      (57.6050,28.6840) --
      (48.6250,28.6840) --
      cycle;
    \draw[pipes] % Second divider
      (79.3500,32.2500) --
      (79.3500,0.5000);
    \fill[letters] % First C
      (109.4380,23.5230) .. controls (106.5820,25.1910) and (104.1370,25.9380) ..
      (101.4490,25.9380) .. controls (96.1450,25.9380) and (92.2030,22.1640) ..
      (92.2030,17.0590) .. controls (92.2030,11.8550) and (96.0080,8.2500) ..
      (101.5860,8.2500) .. controls (104.2030,8.2500) and (107.0590,9.1680) ..
      (109.6760,10.8670) --
      (109.6760,7.2300) .. controls (107.3980,6.0390) and (104.9180,5.1880) ..
      (101.2770,5.1880) .. controls (92.5740,5.1880) and (88.7660,11.8910) ..
      (88.7660,16.7540) .. controls (88.7660,23.8280) and (94.1050,29.0000) ..
      (101.4840,29.0000) .. controls (103.8630,29.0000) and (106.2770,28.4220) ..
      (109.4380,27.0940) --
      cycle;
    \draw[pipes] % Third divider
      (119.0000,32.2500) --
      (119.0000,0.5000);
    \fill[letters] % Second C
      (149.1520,23.5230) .. controls (146.2970,25.1910) and (143.8480,25.9380) ..
      (141.1600,25.9380) .. controls (135.8550,25.9380) and (131.9140,22.1640) ..
      (131.9140,17.0590) .. controls (131.9140,11.8550) and (135.7230,8.2500) ..
      (141.2970,8.2500) .. controls (143.9140,8.2500) and (146.7700,9.1680) ..
      (149.3910,10.8670) --
      (149.3910,7.2300) .. controls (147.1090,6.0390) and (144.6290,5.1880) ..
      (140.9920,5.1880) .. controls (132.2850,5.1880) and (128.4800,11.8910) ..
      (128.4800,16.7540) .. controls (128.4800,23.8280) and (133.8160,29.0000) ..
      (141.1950,29.0000) .. controls (143.5740,29.0000) and (145.9880,28.4220) ..
      (149.1520,27.0940) --
      cycle;
  \end{tikzpicture}%
  \egroup
}
%    \end{macrocode}
%
% \subsection{Layout}
% 
%    \begin{macrocode}
\ifKV@dcchowto@press
  \setstocksize{317.817mm}{230.817mm}
  \settrimmedsize{297mm}{210mm}{*}
  \settrims{10.4085mm}{10.4085mm}
  \quarkmarks
\fi
%    \end{macrocode}
%
% When in two-column mode, the left and right margins are both 15\,mm,
% while the gap between columns is 10\,mm, so one column =
% $(210 - 15 - 15 - 10)\,\textrm{mm} / 2$ wide.
%
%    \begin{macrocode}
\newlength{\OneColWidth}
\setlength{\OneColWidth}{85mm}
\ifKV@dcchowto@twocolumn
  \RequirePackage{xifthen,calc,balance,fix2col}
  \RequirePackage[tracking=smallcaps,letterspace=50,expansion=false,protrusion=basictext]{microtype}
  \RequirePackage{textcase}
  \newcommand{\allcaps}[1]{\MakeTextUppercase{\textls[100]{#1}}}
  \newcommand{\smallcaps}[1]{\MakeTextLowercase{\textsc{#1}}}
  \renewcommand*{\oldstylenums}[1]{{\footnotesize #1}}
  \newif\ifmemtufte@flipheader\memtufte@flipheaderfalse
\fi
\firmlists
\ifKV@dcchowto@twocolumn
  \setlxvchars
  \setlength{\xlvchars}{.45\lxvchars}
  \newlength{\marginunit}
  \setlength{\marginunit}{(\paperwidth - \lxvchars - \xlvchars) / \real{2.5}}
  \setlength{\headwidth}{\paperwidth - 2\marginunit}
  \newlength{\dirtymargin}
  \setlength{\dirtymargin}{\xlvchars + 0.4\marginunit}
  \setlrmarginsandblock{1.05\marginunit}{1.45\marginunit + \xlvchars}{*}
  \setulmarginsandblock{1.25\marginunit}{*}{1}
  \setheaderspaces{*}{*}{0.75}
  \setmarginnotes{0.4\marginunit}{\xlvchars}{\baselineskip}
  \checkandfixthelayout
\fi
\setulmarginsandblock{64pt}{*}{1}
%    \end{macrocode}
%
% Need to ensure marginpar width not auto adjusted
%
%    \begin{macrocode}
\memsetmacroused\setmarginnotes
\checkandfixthelayout
\ifKV@dcchowto@twocolumn
  \newenvironment{fullwidth}{%
    \if@twoside
      \begin{adjustwidth*}{0pt}{-\dirtymargin}%
    \else
      \begin{adjustwidth}{0pt}{-\dirtymargin}%
    \fi
  }{%
    \if@twoside\end{adjustwidth*}\else\end{adjustwidth}\fi
  }
  \newsavebox{\memtufte@fwbox}
  \newenvironment{fullwidth*}{%
    \begin{lrbox}{\memtufte@fwbox}
      \begin{minipage}[t]{\headwidth}
  }{%
      \end{minipage}
    \end{lrbox}
    \begin{adjustwidth}{0pt}{0pt}% mimicking the spacing of `fullwidth'
      \if@twoside
        \checkoddpage
        \ifoddpage
          \rlap{\usebox{\memtufte@fwbox}}%
        \else
          \llap{\usebox{\memtufte@fwbox}}%
        \fi
      \else
        \rlap{\usebox{\memtufte@fwbox}}%
      \fi
    \end{adjustwidth}
  }
\fi
\RequirePackage{marginfix}
\flushbottom
\raggedyright
%    \end{macrocode}
%
% \subsection{Headers and footers}
%
%    \begin{macrocode}
\newlength\TitleTabWidth
\settowidth{\TitleTabWidth}{\fontsize{16pt}{20pt}\lightseries
  A Digital Curation Centre `working level' guide}
%    \end{macrocode}
%
% fixes for two-column layout
%
%    \begin{macrocode}
\newlength{\regularheadwidth}
\ifKV@dcchowto@twocolumn
  \setlength{\regularheadwidth}{\paperwidth - 30mm}
\else
  \setlength{\regularheadwidth}{\headwidth}
\fi
%    \end{macrocode}
%
% Plain (default) headers and footers
%
%    \begin{macrocode}
\ifx\undefined\dcchowto@mark\else
  \makeevenhead{plain}{}{\smallcaps{\dcchowto@mark:\quad\today}}{}
  \makeoddhead{plain}{}{\smallcaps{\dcchowto@mark:\quad\today}}{}
\fi
\ifKV@dcchowto@numbers
  \ifmemtufte@flipheader
    \makeoddfoot{plain}{%
      \makebox[0pt][l]{%
        \makebox[\regularheadwidth][c]{%
          \raisebox{-44.4pt}[0pt][0pt]{%
            \color{dccmaroon}\rule{\paperwidth + 18pt}{41pt}%
          }%
        }%
      }%
      \ifodd
        \count\z@
      \else
        \raisebox{-1.5\onelineskip}{%
          \textcolor{white}{\textbf{\thepage}}%
        }%
      \fi
    }{}{%
      \ifodd
        \count\z@
        \raisebox{-1.5\onelineskip}{%
          \textcolor{white}{\textbf{\thepage}}%
        }%
      \fi
    }
  \else
    \makeoddfoot{plain}{}{%
      \makebox[0pt][c]{%
        \raisebox{-44.4pt}[0pt][0pt]{%
          \color{dccmaroon}\rule{\paperwidth + 18pt}{41pt}%
        }%
      }%
    }{%
      \raisebox{-1.5\onelineskip}{%
        \textcolor{white}{\textbf{\thepage}}%
      }%
    }
  \fi
  \makeevenfoot{plain}{%
    \makebox[0pt][l]{%
      \makebox[\regularheadwidth][c]{%
        \raisebox{-44.4pt}[0pt][0pt]{%
          \color{dccmaroon}\rule{\paperwidth + 18pt}{41pt}%
        }%
      }%
    }%
    \raisebox{-1.5\onelineskip}{%
      \textcolor{white}{\textbf{\thepage}}%
    }%
  }{}{}
\else
  \makeoddfoot{plain}{}{%
    \makebox[0pt][c]{%
      \raisebox{-44.4pt}[0pt][0pt]{%
        \color{dccmaroon}\rule{\paperwidth + 18pt}{41pt}%
      }%
    }%
  }{}
  \makeevenfoot{plain}{}{%
    \makebox[0pt][c]{%
      \raisebox{-44.4pt}[0pt][0pt]{%
        \color{dccmaroon}\rule{\paperwidth + 18pt}{41pt}%
      }%
    }%
  }{}
\fi
\pagestyle{plain}
%    \end{macrocode}
%
% Title page headers and footers
% 
%    \begin{macrocode}
\copypagestyle{title}{plain}
\ifKV@dcchowto@twocolumn
  \makerunningwidth{title}{\headwidth}
  \makeheadposition{title}{flushright}{flushleft}{flushright}{flushleft}
\fi
\makeoddhead{title}{%
  \makebox[\TitleTabWidth][c]{%
    \raisebox{-86.8pt}[0pt][0pt]{%
      \tikz{%
        \fill[dccmaroon]
          (0,0)
          -- ++(0pt,-104pt)
          arc(180:270:22pt)
          -- ++(\TitleTabWidth,0pt)
          arc (270:360:22pt)
          -- ++(0pt,104pt)
          -- cycle
        ;
      }%
    }%
  }%
}{}{%
  \makebox[112pt][l]{%
    \raisebox{10pt-\height}[0pt][0pt]{%
      \begin{minipage}{148pt}
        \raggedleft
        \dcclogo[width=148pt]\quad
        \dcchowto@partner@logos
        \raisebox{0pt}[\height+24pt][0pt]{%
          \makebox[45pt][l]{%
            \includegraphics[width=80pt]{jisc-tab}%
          }%
        }%
      \end{minipage}
      %
    }%
  }%
}
\makeoddfoot{title}{}{%
  \makebox[0pt][c]{%
    \raisebox{-44.4pt}[0pt][0pt]{%
      \color{dccmaroon}\rule{\paperwidth + 18pt}{57pt}%
    }%
  }%
}{}
%    \end{macrocode}
%
% Last page headers and footers (if acting as back cover)
% 
%    \begin{macrocode}
\makepagestyle{last}
\ifKV@dcchowto@twocolumn
  \makerunningwidth{last}{\regularheadwidth}
\else
  \makerunningwidth{last}{\headwidth}
\fi
\makeheadposition{last}{flushright}{flushleft}{flushright}{flushleft}
\newlength{\LastHeadHeight}
\newcommand*{\lastheadheight}[1]{\setlength{\LastHeadHeight}{#1}}
\lastheadheight{200pt}
\makeevenhead{last}{}{%
  \makebox[0pt][c]{%
    \raisebox{29.4pt - \LastHeadHeight}[0pt][0pt]{%
      \color{dccmaroon}\rule{\paperwidth + 18pt}{\LastHeadHeight + 9pt}%
    }%
  }%
}{}
\makeoddhead{last}{}{%
  \makebox[0pt][c]{%
    \raisebox{29.4pt - \LastHeadHeight}[0pt][0pt]{%
      \color{dccmaroon}\rule{\paperwidth + 18pt}{\LastHeadHeight + 9pt}%
    }%
  }%
}{}
\ifx\undefined\dcchowto@mark\else
  \makeevenfoot{last}{}{\smallcaps{\dcchowto@mark:\quad\today}}{}
  \makeoddfoot{last}{}{\smallcaps{\dcchowto@mark:\quad\today}}{}
\fi
%    \end{macrocode}
%
% \subsection{Metadata}
%
% Reimplementation of \cs{author} command.
%
%    \begin{macrocode}
\newcounter{dcchowto@authors}
\newcounter{dcchowto@space}
\def\dcchowto@author@display{\setcounter{dcchowto@authors}{0}}
\def\DCCHowtoAuthorAPA{\setcounter{dcchowto@authors}{0}}
\def\dcchowto@author@pdf{}
\renewcommand{\author}[1]{%
  \StrBefore{#1}{ (}[\dcchowto@author@name]
  \ifdefempty{\dcchowto@author@name}{%
    \def\dcchowto@author@name{#1}%
    \let\dcchowto@author@affil\undefined
  }{%
    \StrBetween{#1}{(}{)}[\dcchowto@author@affil]%
  }
  \ifnum\thedcchowto@authors>0
    \expandafter\def\csname dcchowto@author\roman{dcchowto@authors}@and\endcsname{, }
    \expandafter\def\csname dcchowto@author\roman{dcchowto@authors}@et\endcsname{, }
    \stepcounter{dcchowto@authors}
    \expandafter\def\csname dcchowto@author\roman{dcchowto@authors}@and\endcsname{ and }
    \expandafter\def\csname dcchowto@author\roman{dcchowto@authors}@et\endcsname{, \& }
    \appto\dcchowto@author@display{%
      \stepcounter{dcchowto@authors}%
      \csname dcchowto@author\roman{dcchowto@authors}@and\endcsname
    }
    \appto\DCCHowtoAuthorAPA{%
      \stepcounter{dcchowto@authors}%
      \csname dcchowto@author\roman{dcchowto@authors}@et\endcsname
    }
    \appto\dcchowto@author@pdf{, }
  \else
    \stepcounter{dcchowto@authors}
    \appto\dcchowto@author@display{%
      \stepcounter{dcchowto@authors}%
    }
    \appto\DCCHowtoAuthorAPA{%
      \stepcounter{dcchowto@authors}%
    }
  \fi
  \eappto\dcchowto@author@display{%
    \noexpand\textmd{\dcchowto@author@name}%
  }
  \ifdef{\dcchowto@author@affil}{%
    \eappto\dcchowto@author@display{
      (\dcchowto@author@affil)%
    }%
  }{}
  \StrCount{\dcchowto@author@name}{ }[\dcchowto@spaces]
  \StrBehind[\dcchowto@spaces]{\dcchowto@author@name}{ }[\dcchowto@author@surname]
  \eappto\DCCHowtoAuthorAPA{%
    \dcchowto@author@surname,%
  }
  \StrChar{\dcchowto@author@name}{1}[\dcchowto@author@init]
  \eappto\DCCHowtoAuthorAPA{
    \dcchowto@author@init.%
  }
  \setcounter{dcchowto@space}{1}
  \whileboolexpr{test {\ifnumcomp{\thedcchowto@space}{<}{\dcchowto@spaces}}}{%
    \StrPosition[\thedcchowto@space]{\dcchowto@author@name}{ }[\dcchowto@initpos]
    \StrChar{\dcchowto@author@name}{\numexpr\dcchowto@initpos+1}[\dcchowto@author@init]
    \eappto\DCCHowtoAuthorAPA{
      \dcchowto@author@init.%
    }
    \stepcounter{dcchowto@space}
  }
  \eappto\dcchowto@author@pdf{%
    \dcchowto@author@name
  }
}
%    \end{macrocode}
%
% Organisations collaborating on this guide with the DCC.
%
%    \begin{macrocode}
\newcounter{dcchowto@partners}
\def\dcchowto@partners{\setcounter{dcchowto@partners}{0}}
\newcommand{\partner}[1]{%
  \ifnum\thedcchowto@partners>0
    \expandafter\def\csname dcchowto@partner\roman{dcchowto@partners}@and\endcsname{, }
  \fi
  \stepcounter{dcchowto@partners}
  \expandafter\def\csname dcchowto@partner\roman{dcchowto@partners}@and\endcsname{ and }
  \appto\dcchowto@partners{%
    \stepcounter{dcchowto@partners}%
    \csname dcchowto@partner\roman{dcchowto@partners}@and\endcsname
  }
  \eappto\dcchowto@partners{#1}  
}
%    \end{macrocode}
%
% Branding associated with the above organisations.
%
%    \begin{macrocode}
\def\dcchowto@partner@logos{}
\newcommand{\partnerlogo}[1]{%
  \appto\dcchowto@partner@logos{%
    \raisebox{0pt}[\height+24pt][0pt]{#1}\quad
  }%
}
%    \end{macrocode}
%
% \subsection{Title page}
% 
%    \begin{macrocode}
\newbox\TitleBox
\let\maketitle\relax
\newcommand{\maketitle}[1][]{%
  \thispagestyle{title}
  \vspace*{6pt}
  \noindent
  \raisebox{0pt}[1em][0pt]{%
    \begin{minipage}[b]{\TitleTabWidth}
      \begin{raggedright}
        \fontsize{16pt}{20pt}\selectfont\lightseries\color{white}%
        A Digital Curation Centre\dcchowto@partners
        \ `working level' guide\par
      \end{raggedright}
    \end{minipage}
  }
  \par\vspace{5.3em}
  \begin{lrbox}{\TitleBox}
    \begin{minipage}[t]{\textwidth + 0.6\dirtymargin}
      \begin{flushleft}
        \fontsize{36pt}{40pt}\selectfont
        \bfseries\color{dccmaroon}%
        \thetitle
      \end{flushleft}
      
      \begin{flushleft}
        \huge\lightseries\color{dccblue}
        \dcchowto@author@display
      \end{flushleft}
      
      \ifx\undefined\dcchowto@mark\else
        \begin{flushleft}
          \smallcaps{\dcchowto@mark:\quad\today}
        \end{flushleft}
      \fi
    \end{minipage}
  \end{lrbox}
  \rlap{\usebox{\TitleBox}}
  \par\vfill
  \begin{fullwidth*}
    \begin{flushleft}
      \large\bfseries
      \color{dccblue}\includegraphics[width=74pt]{cc_by}\\[4pt]
      Digital Curation Centre, \the\year.\\
      Licensed under Creative Commons Attribution 4.0 International:\\
      \url{http://creativecommons.org/licenses/by/4.0/}
    \end{flushleft}
  \end{fullwidth*}
  \ifKV@dcchowto@twocolumn
    \setlrmarginsandblock{15mm}{15mm}{*}
    \setcolsepandrule{10mm}{0pt}
    \twocolumn[%
      \begin{@twocolumnfalse}
        %\vspace*{-1em}
        \raggedright
        {\HUGE\color{dccmaroon}\textbf{\thetitle}\par}
      \end{@twocolumnfalse}
      \par\vspace{1\onelineskip plus \onelineskip minus \onelineskip}\par
      \begin{abstract}
        \raggedright #1
      \end{abstract}
      \par\vspace{2\onelineskip plus \onelineskip minus \onelineskip}\par
    ]
%    \end{macrocode}
%
% Need to ensure marginpar width not auto adjusted
% 
%    \begin{macrocode}
    \memsetmacroused\setmarginnotes
    \checkandfixthelayout
  \else
    \pagebreak
    \begin{fullwidth*}
      \vspace*{-1em}\raggedright
      {\HUGE\color{dccmaroon}\textbf{\thetitle}\par}
    \end{fullwidth*}
    \par\vspace{2\onelineskip plus \onelineskip minus \onelineskip}\par
    \begin{fullwidth*}
      \begin{abstract}
        \raggedright #1
      \end{abstract}
    \end{fullwidth*}
  \fi
}
%    \end{macrocode}
%
% \subsection{Typography}
% 
% Abstract
% 
%    \begin{macrocode}
\AtBeginDocument{%
  \renewcommand{\abstractname}{Introduction}%
  \setlength{\absparindent}{0pt}%
}
\renewcommand{\abstractnamefont}{\color{dccblue}\Huge}
\renewcommand{\abstracttextfont}{\color{dccblue}\Large\itshape\lightseries}
\setlength{\absleftindent}{0pt}
\setlength{\absrightindent}{0pt}
\renewcommand{\absnamepos}{flushleft}
%    \end{macrocode}
%
% Headings
%
%    \begin{macrocode}
\setsecheadstyle{%
  \normalfont\LARGE\bfseries\raggedright\textcolor{dccblue}%
}
\setsubsecheadstyle{%
  \normalfont\Large\raggedright\textcolor{dccblue}%
}
\setsubsubsecheadstyle{%
  \normalfont\normalsize\itshape\raggedright\textcolor{dccblue}%
}
\newcommand{\dottedblue}[1]{\textcolor{dccblue}{\addperiod{#1}}}
\setparaheadstyle{%
  \normalfont\normalsize\bfseries\dottedblue
}
\setsubparaheadstyle{%
  \normalfont\normalsize\itshape\dottedblue
}
\ifKV@dcchowto@twocolumn
  \hangcaption
\fi
\captionstyle[\centering]{\raggedyright}
\captionnamefont{\footnotesize\bfseries}
\captiontitlefont{\footnotesize}
\setsecnumdepth{part}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
%    \end{macrocode}
%
% Lists
%
%    \begin{macrocode}
\newcommand{\bluelabel}[1]{\color{dccblue}#1}
\setlist[itemize]{font=\color{dccblue}}
\setlist[enumerate]{font=\color{dccblue}}
\setlist[description]{font=\dottedblue}
%    \end{macrocode}
%
% Boxouts
%
%    \begin{macrocode}
\RequirePackage{tcolorbox}
%    \end{macrocode}
%
% 
% \begin{environment}{boxout}
%    \begin{macrocode}
\newtcolorbox{boxout}%
  { colback=white
  , colframe=dccmaroon
  , coltext=dccblue
  , parbox=false
  , code=
    { \setlist[itemize]%
      { leftmargin=*
      , font=\color{dccblue}
      }%
    }
  , left=2mm
  , right=2mm
  , oversize
  }
\makesavenoteenv{boxout}
%    \end{macrocode}
% \end{environment}
%
% 
% \begin{environment}{fillboxout}
%    \begin{macrocode}
\newtcolorbox{fillboxout}%
  { colback=dccpeach
  , colframe=dccpeach
  , coltext=dccmaroon
  , boxrule=0pt
  , parbox=false
  , code=
    { \setlist[itemize]%
      { leftmargin=*
      , font=\color{dccblue}
      }%
      \setlist[description]%
      { font=\color{dccblue}
      , style=nextline
      , leftmargin=0pt
      }%
    }
  , before upper=\raggedyright
  , left=1ex
  , right=1ex
  , top=1ex
  , bottom=1ex
}
%    \end{macrocode}
% \end{environment}
%
% Footnotes
%
%    \begin{macrocode}
\ifKV@dcchowto@twocolumn
  \renewcommand*{\footnoterule}{%
    \kern-3pt%
    \textcolor{dccmaroon}{\hrule}%
    \kern 2.6pt%
  }
  \setlength{\footmarkwidth}{0pt}
  \setlength{\footmarksep}{0pt}
  \footmarkstyle{\textsuperscript{#1} }
  \renewcommand{\makefootmarkhook}{\raggedyright}
\fi
%    \end{macrocode}
%
% Where it is used, \cs{today} is printed in small caps. The preferred font uses
% fake small caps, but sadly old style numbers aren't faked. By marking up the
% figures explicitly, we can allow them to be faked.
%
%    \begin{macrocode}
\AtBeginDocument{%
  \renewcommand*{\today}{%
    \oldstylenums{\number\day}\space
    \ifcase\month
      \or January\or February\or March\or April\or May\or June \or July%
      \or August\or September\or October\or November\or December%
    \fi
    \space\oldstylenums{\number\year}%
  }%
}
%    \end{macrocode}
% 
% \subsection{Bibliography}
% 
%    \begin{macrocode}
\RequirePackage[bibstyle=apa,citestyle=apa-verbose,backend=biber]{biblatex}
\DeclareLanguageMapping{british}{british-apa}
%    \end{macrocode}
%
% Normally this only kicks in with the bibliography, but we have bibliography
% entries instead of parenthetical citations in the text.
%
%    \begin{macrocode}
\renewcommand*{\finalnamedelim}{%
  \ifthenelse{\value{listcount}>7}{}{%
    \ifthenelse{\ifcurrentname{author}\OR\boolean{bbx:editorinauthpos}}{%
      \ifnum\value{liststop}>1
        \finalandcomma
      \fi
      \addspace\&\space
    }{%
      \addspace\&\space
    }%
  }%
}
\newbibmacro*{cite:noyear}{%
  \ifnameundef{shortauthor}{}{%
    \ifciteseen{}{%
      \printnames{shortauthor}%
      \setunit{\nameyeardelim}%
    }%
  }%
  \printtext{\biblcstring{nodate}}%
}
\defbibheading{bibliography}{}
\setlength{\bibhang}{0pt}
%    \end{macrocode}
%
% use \cs{baselineskip} for \cs{bibparsep} to keep it stretchy
%
%    \begin{macrocode}
\setlength{\bibparsep}{0.5\onelineskip plus 0.2\onelineskip minus 0.2\onelineskip}
%    \end{macrocode}
%
% ordinary cites are in footnotes; nocites are in bibliography at the end
%
%    \begin{macrocode}
\DeclareBibliographyCategory{notcited}
\addtoiargdef{\nocite}{\addtocategory{notcited}{#1}}{}
%    \end{macrocode}
%
% end bibliography is in two columns
%
%    \begin{macrocode}
\RequirePackage{multicol}
\newcommand*{\refurl}[2]{\begingroup\biburlsetup #1, \textsc{url}: \url{#2}\endgroup.}
%    \end{macrocode}
%
%    \begin{macrocode}
\endinput
%    \end{macrocode}
% \iffalse
%</class>
% \fi
%\Finale
